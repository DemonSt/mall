{"version":3,"sources":["webpack:///src/css/global.css","app.282dc943.css","webpack:///src/components/src/components/Cart.vue","webpack:///src/components/src/components/GolbalNav.vue","webpack:///src/components/src/components/RegularNav.vue","webpack:///src/components/src/components/ProductCard.vue","webpack:///src/page/src/page/Home.vue","webpack:///src/page/src/page/Product.vue","webpack:///src/components/search/src/components/search/FilterProp.vue","webpack:///src/page/src/page/Search.vue","webpack:///src/page/src/page/My.vue","webpack:///src/page/src/page/Order.vue","webpack:///src/css/admin.css","webpack:///src/components/src/components/Dropdown.vue","webpack:///src/page/admin/src/page/admin/Product.vue"],"names":[],"mappings":"AAAA,EACE,6BAAA,CAA2D,qBCC7D,CDEA,MACE,sBAAA,CACA,UAAA,CACA,cCCF,CDEA,EACE,oBCCF,CDEA,IACE,aAAA,CACA,UCCF,CDEA,SACE,QAAA,CACA,QAAA,CACA,SCCF,CDEA,2BAEE,eAAA,CACA,gBAAA,CACA,iBAAA,CACA,iBAAA,CACA,kBCCF,CDEA,gBACE,eCCF,CDEA,WAAa,eAAgB,CAC7B,YAAc,gBAAiB,CAC/B,aAAe,iBAAkB,CAEjC,QACE,oBAAA,CACA,iBAAA,CACA,UAAA,CACA,oBAAA,CACA,cCCF,CDEA,cACE,UAAA,CACA,yBCCF,CDEA,yBACE,kBCCF,CDEA,MACE,aCCF,CDEA,QACE,oBAAA,CACA,gBAAA,CACA,kBCCF,CDEA,sBACE,UCCF,CDEA,MACE,yBAAA,CACA,YCCF,CDEA,KACE,UAAA,CACA,eCCF,CDEA,YACE,eCCF,CDEA,WACE,aAAA,CACA,aCCF,CDEA,OACE,eCCF,CDEA,YACE,oBAAA,CACA,aAAA,CACA,cCCF,CDEA,OACE,UCCF,CDEA,YACE,aAAA,CACA,aCCF,CCPA,oBACA,iBDUA,CCPA,uBACA,cAAA,CACA,eAAA,CACA,eAAA,CACA,UAAA,CACA,UDSA,CCNA,wCACA,eDQA,CEtEA,sBACA,yBF0EA,CEvEA,8BACA,YFyEA,CGhFA,uBACA,cAAA,CACA,eAAA,CACA,kBHoFA,CGjFA,yBACA,iBAAA,CACA,QHmFA,CIzGA,6BACA,SJ6GA,CKzEA,uCACA,aAAA,CACA,cAAA,CACA,WAAA,CACA,iBAAA,CACA,QL6EA,CK1EA,kDACA,wBL4EA,CKzEA,mDACA,wBL2EA,CKxEA,2BACA,cL0EA,CMqGA,uCACA,aAAA,CACA,cAAA,CACA,WAAA,CACA,iBAAA,CACA,QNjGA,CMoGA,kDACA,wBNlGA,CMqGA,mDACA,wBNnGA,CMsGA,uCACA,aAAA,CACA,gBNpGA,CMuGA,oCACA,cNrGA,CMwGA,wBACA,gBNtGA,CMyGA,kDAEA,kBNvGA,CM0GA,8BACA,oBAAA,CACA,iBAAA,CACA,iBAAA,CACA,+BAAA,CACA,aAAA,CACA,cNxGA,CM+GA,4EACA,iBN1GA,CM6GA,wBACA,+BAAA,CACA,WAAA,CACA,aAAA,CACA,UN3GA,CM8GA,gCACA,kBN5GA,CM+GA,+BACA,cAAA,CACA,aN7GA,CMgHA,8CACA,SN9GA,CMiHA,6CACA,SN/GA,CMkHA,2BACA,aAAA,CACA,UNhHA,COnLA,gEAEA,oBAAA,CACA,cAAA,CACA,WPuLA,COpLA,wCACA,kBAAA,CACA,UPsLA,CQoEA,yBACA,cAAA,CACA,iBRhEA,CQmEA,yBACA,URjEA,CQoEA,0BACA,kBRlEA,CQqEA,iCACA,+BAAA,CACA,qBRnEA,CQsEA,4CACA,uBRpEA,CQuEA,+BACA,aAAA,CACA,URrEA,CQyEA,uBACA,oBAAA,CACA,qBRvEA,CQ0EA,6BACA,iBRxEA,CQ2EA,+BACA,cRzEA,CQ4EA,qCACA,UR1EA,CQ8EA,8BACA,iBR5EA,CSjPA,kBACA,YTqPA,CUvIA,+BACA,WV2IA,CUxIA,gCACA,aV0IA,CUvIA,yBACA,eVyIA,CW1SA,YACE,eAAA,CACA,aX6SF,CY1MA,2BACA,aAAA,CACA,iBZ6MA,CY1MA,iCACA,UZ4MA,CYzMA,uBACA,eAAA,CACA,+BZ2MA,CYxMA,yBACA,mBZ0MA,CYvMA,+BACA,4BZyMA,CYtMA,uBACA,iBAAA,CAEA,WAAA,CACA,UZwMA,Ca4EA,4BACA,yCAAA,CAAA,iCbxEA,Ca2EA,kCACA,iBAAA,CACA,oBAAA,CACA,cAAA,CACA,abzEA,Ca4EA,0BACA,YAAA,CACA,qBAAA,CACA,kBb1EA","file":"app.282dc943.css","sourcesContent":["* {\n  -webkit-box-sizing: border-box;-moz-box-sizing: border-box;box-sizing: border-box;\n}\n\n:root {\n  font-family: sans-serif;\n  color: #333;\n  font-size: 12px;\n}\n\na {\n  text-decoration: none;\n}\n\nimg {\n  display: block;\n  width: 100%;\n}\n\nfieldset {\n  border: 0;\n  margin: 0;\n  padding: 0;\n}\n\n.form-container,\n.container {\n  max-width: 800px;\n  margin-left: auto;\n  margin-right: auto;\n  padding-left: .5em;\n  padding-right: .5em;\n}\n\n.form-container {\n  max-width: 400px;\n}\n\n.text-left { text-align: left; }\n.text-right { text-align: right; }\n.text-center { text-align: center; }\n\n.anchor {\n  display: inline-block;\n  padding: .3em .5em;\n  color: #555;\n  text-decoration: none;\n  cursor: pointer;\n}\n\n.anchor:hover {\n  color: #000;\n  text-decoration: underline;\n}\n\n.vertical-gutter .el-col {\n  margin-bottom: .5em;\n}\n\n.pair {\n  margin: .2em 0;\n}\n\n.pair > * {\n  display: inline-block;\n  margin: 0 1em 0 0;\n  vertical-align: top;\n}\n\n.pair > *:nth-child(odd) {\n  opacity: .6;\n}\n\n.well {\n  background: rgba(0,0,0,.1);\n  padding: .5em;\n}\n\n.hot {\n  color: #e10;\n  font-weight: bold;\n}\n\n.cny:before {\n  content: 'ï¿¥';\n}\n\nform label {\n  display: block;\n  margin: .5em 0;\n}\n\n.title {\n  font-weight: bold;\n}\n\nform .title {\n  display: inline-block;\n  margin: .5em 0;\n  font-size: 110%;\n}\n\n.error {\n  color: #e10;\n}\n\nform .error {\n  display: block;\n  margin: .5em 0;\n}","* {\n  -webkit-box-sizing: border-box;box-sizing: border-box;\n}\n\n:root {\n  font-family: sans-serif;\n  color: #333;\n  font-size: 12px;\n}\n\na {\n  text-decoration: none;\n}\n\nimg {\n  display: block;\n  width: 100%;\n}\n\nfieldset {\n  border: 0;\n  margin: 0;\n  padding: 0;\n}\n\n.form-container,\n.container {\n  max-width: 800px;\n  margin-left: auto;\n  margin-right: auto;\n  padding-left: .5em;\n  padding-right: .5em;\n}\n\n.form-container {\n  max-width: 400px;\n}\n\n.text-left { text-align: left; }\n.text-right { text-align: right; }\n.text-center { text-align: center; }\n\n.anchor {\n  display: inline-block;\n  padding: .3em .5em;\n  color: #555;\n  text-decoration: none;\n  cursor: pointer;\n}\n\n.anchor:hover {\n  color: #000;\n  text-decoration: underline;\n}\n\n.vertical-gutter .el-col {\n  margin-bottom: .5em;\n}\n\n.pair {\n  margin: .2em 0;\n}\n\n.pair > * {\n  display: inline-block;\n  margin: 0 1em 0 0;\n  vertical-align: top;\n}\n\n.pair > *:nth-child(odd) {\n  opacity: .6;\n}\n\n.well {\n  background: rgba(0,0,0,.1);\n  padding: .5em;\n}\n\n.hot {\n  color: #e10;\n  font-weight: bold;\n}\n\n.cny:before {\n  content: '\\FFE5';\n}\n\nform label {\n  display: block;\n  margin: .5em 0;\n}\n\n.title {\n  font-weight: bold;\n}\n\nform .title {\n  display: inline-block;\n  margin: .5em 0;\n  font-size: 110%;\n}\n\n.error {\n  color: #e10;\n}\n\nform .error {\n  display: block;\n  margin: .5em 0;\n}\n\nh2[data-v-74a81a26] {\n  text-align: center;\n}\n.cart[data-v-74a81a26] {\n  position: fixed;\n  max-width: 400px;\n  min-width: 200px;\n  z-index: 10;\n  right: 15px;\n}\n.el-input-number--mini[data-v-74a81a26] {\n  max-width: 100px;\n}\n\n\n.nav[data-v-586900af] {\n  background: rgba(0, 0, 0, .1);\n}\n.nav .anchor[data-v-586900af] {\n  padding: .6em;\n}\n\n\n.logo[data-v-8e3380c4] {\n  max-width: 10em;\n  padding-top: 1em;\n  padding-bottom: 1em;\n}\n.search[data-v-8e3380c4] {\n  position: relative;\n  top: 15px;\n}\n\n\n.product-card .el-card__body {\n  padding: 0;\n}\n\n\n.el-carousel__item h3[data-v-121c3a2c] {\n  color: #475669;\n  font-size: 14px;\n  opacity: 0.75;\n  line-height: 200px;\n  margin: 0;\n}\n.el-carousel__item[data-v-121c3a2c]:nth-child(2n) {\n  background-color: #99a9bf;\n}\n.el-carousel__item[data-v-121c3a2c]:nth-child(2n+1) {\n  background-color: #d3dce6;\n}\n.carousel[data-v-121c3a2c] {\n  margin-top: 1em;\n}\n\n\n.el-carousel__item h3[data-v-72ef49d6] {\n  color: #475669;\n  font-size: 18px;\n  opacity: 0.75;\n  line-height: 300px;\n  margin: 0;\n}\n.el-carousel__item[data-v-72ef49d6]:nth-child(2n) {\n  background-color: #99a9bf;\n}\n.el-carousel__item[data-v-72ef49d6]:nth-child(2n+1) {\n  background-color: #d3dce6;\n}\n.pair > *[data-v-72ef49d6]:nth-child(odd) {\n  font-size: 80%;\n  margin-right: 3em;\n}\n.overview .hot.cny[data-v-72ef49d6] {\n  font-size: 120%;\n}\n.title[data-v-72ef49d6] {\n  font-size: 1.1rem;\n}\n.detail > *[data-v-72ef49d6],\n.text > *[data-v-72ef49d6] {\n  margin-bottom: .8em;\n}\n.pill-option[data-v-72ef49d6] {\n  display: inline-block;\n  margin-right: .5em;\n  padding: .3em .5em;\n  border: 2px solid rgba(0, 0, 0, .2);\n  font-size: 80%;\n  cursor: default;\n}\n.pill-option.active[data-v-72ef49d6] {\n  border-color: #e10;\n}\n.pill-option.selected[data-v-72ef49d6] {\n  border-color: #e10;\n}\n.props[data-v-72ef49d6] {\n  border: 1px solid rgba(0, 0, 0, .1);\n  padding: 1em;\n  font-size: 80%;\n  color: #666;\n}\n.props .el-col[data-v-72ef49d6] {\n  margin-bottom: .3em;\n}\n.props .pair > *[data-v-72ef49d6] {\n  margin-right: 0;\n  margin-left: 0;\n}\n.props .pair > *[data-v-72ef49d6]:nth-child(odd) {\n  width: 40%;\n}\n.props .pair > *[data-v-72ef49d6]:nth-child(even) {\n  width: 60%;\n}\n.main_ing[data-v-72ef49d6] {\n  display: block;\n  width: 100%;\n}\n\n\n.filter .type[data-v-72beae5c],\n.filter .option[data-v-72beae5c] {\n  display: inline-block;\n  cursor: pointer;\n  padding: 1em;\n}\n.filter .option.active[data-v-72beae5c] {\n  background: #409EFF;\n  color: #fff;\n}\n\n\n.search[data-v-2b6a7144] {\n  margin-top: 1em;\n  margin-bottom: 1em;\n}\n.filter[data-v-2b6a7144] {\n  color: #666;\n}\n.filter > *[data-v-2b6a7144] {\n  margin-bottom: .5em;\n}\n.filter .table > *[data-v-2b6a7144] {\n  border: 1px solid rgba(0, 0, 0, .1);\n  border-bottom-width: 0;\n}\n.filter .table > *[data-v-2b6a7144]:last-child {\n  border-bottom-width: 1px;\n}\n.filter .type[data-v-2b6a7144] {\n  font-size: 90%;\n  opacity: .8;\n}\n.bar > *[data-v-2b6a7144] {\n  display: inline-block;\n  vertical-align: middle;\n}\n.bar .group[data-v-2b6a7144] {\n  margin-right: .5em;\n}\n#price-filter[data-v-2b6a7144] {\n  max-width: 14em;\n}\n#price-filter input[data-v-2b6a7144] {\n  width: 100%;\n}\n.el-checkbox[data-v-2b6a7144] {\n  margin-right: .5em;\n}\n\n\n.side-focus:focus {\n  color: tomato;\n}\n\n\n.card-content[data-v-1e2e56e2] {\n  padding: 1em;\n}\n.detail .title[data-v-1e2e56e2] {\n  margin: .5em 0;\n}\n.qrcode[data-v-1e2e56e2] {\n  max-width: 200px;\n}\n\nform .title {\n  font-weight: bold;\n  display: block;\n}\n\n.dropdown[data-v-6ff118cf] {\n  display: block;\n  position: relative;\n}\n.dropdown input[data-v-6ff118cf] {\n  width: 100%;\n}\n.list[data-v-6ff118cf] {\n  background: #fff;\n  border: 1px solid rgba(0, 0, 0, .2);\n}\n.option[data-v-6ff118cf] {\n  padding: .2rem .5rem;\n}\n.option[data-v-6ff118cf]:hover {\n  background: rgba(0, 40, 180, .2);\n}\n.list[data-v-6ff118cf] {\n  position: absolute;\n  /*top: 33px;*/\n  z-index: 100;\n  width: 100%;\n}\n\n\n.thumbnail[data-v-7634f0c9] {\n  -webkit-box-shadow: 0 0 3px rgba(0, 0, 0, .2);box-shadow: 0 0 3px rgba(0, 0, 0, .2);\n}\ntable .thumbnail[data-v-7634f0c9] {\n  text-align: center;\n  display: inline-block;\n  max-width: 50px;\n  font-size: 70%;\n}\n.segment[data-v-7634f0c9] {\n  padding: .5em;\n  border: 2px solid #ccc;\n  margin-bottom: .5em;\n}\n\n\n/*# sourceMappingURL=app.282dc943.css.map*/","<template>\n  <div class=\"cart\">\n    <el-card>\n      <div slot=\"header\" class=\"clearfix\">\n        <span>æçè´­ç©è½¦</span>\n        <span class=\"anchor\" @click=\"$emit('close')\" style=\"float: right;\">å³é­</span>\n      </div>\n      <div v-if=\"Object.keys(listCart).length < 1\">ææ åå®¹</div>\n      <el-row :key=\"k\" v-for=\"(v, k) in listCart\">\n        <el-col :span=\"4\">\n          <ProductThumb style=\"padding: .2em;\" :data=\"v\"/>\n        </el-col>\n        <el-col :span=\"10\">{{v.product_snapshot.title}}</el-col>\n        <el-col class=\"cny hot text-center\" :span=\"4\">{{v.product_snapshot.price}}</el-col>\n        <el-col :span=\"6\">\n          <div class=\"el-input-number el-input-number--mini\">\n            <span \n              @click=\"cartService.change(v.product_snapshot.id, -1)\" \n              role=\"button\"\n              class=\"el-input-number__decrease\"\n            >\n              <i class=\"el-icon-minus\"></i>\n            </span>\n            <span \n              @click=\"cartService.change(v.product_snapshot.id, +1)\" \n              role=\"button\"\n              class=\"el-input-number__increase\"\n            >\n              <i class=\"el-icon-plus\"></i>\n            </span>\n            <div class=\"el-input el-input--mini\">\n              <input type=\"text\"\n                     v-model=\"v.count\"\n                     autocomplete=\"off\"\n                     aria-label=\"æè¿°æå­\"\n                     max=\"Infinity\"\n                     min=\"1\"\n                     class=\"el-input__inner\"\n                     role=\"spinbutton\"\n                     aria-valuemax=\"10\"\n                     aria-valuemin=\"1\"\n                     aria-valuenow=\"4\"\n                     aria-disabled=\"undefined\">\n            </div>\n          </div>\n        </el-col>\n      </el-row>\n      <p>\n        æ»ä»·ï¼<span class=\"hot cny\">{{orderSum}}</span>\n      </p>\n      <p>\n        <el-button @click=\"createOrder\" type=\"primary\">ä»æ¬¾</el-button>\n      </p>\n    </el-card>\n  </div>\n</template>\n\n<script>\n  import cartService     from '../service/cart';\n  import ProductThumb    from '../components/ProductThumb';\n  import session         from '../lib/session';\n  import { createOrder, orderSum } from '../lib/order';\n  import { obj2Arr }     from '../lib/helper';\n\n  export default {\n    components : { ProductThumb },\n    data () {\n      return {\n        listCart : {},\n        cartService,\n      };\n    },\n    computed: {\n      listCartArr() {\n        return obj2Arr(this.listCart);\n      },\n      orderSum() {\n        return orderSum(this.listCartArr);\n      }\n    },\n    mounted () {\n      console.log(cartService.get());\n      // ä¸å¼å§ æå¨è°ä¸æ¬¡æ°æ®\n      // this.cart_list = cartService.get();\n\n      // è´­ç©è½¦æ°æ®åçæ¹å ï¼è®©åè°ä¼ åæ¥çæ°æ°æ®éæ°è¦ç cart_list éçæ°æ®\n      cartService.onChange(localCart => this.listCart = localCart);\n    },\n    methods    : {\n      createOrder () {\n        createOrder(this.listCartArr, session.user('id'))   //  session.user('id') è°åå»ºçè®¢å\n          .then(r => {\n            this.$router.push(`/my/order/${r.data.id}`);\n            cartService.clear();\n            this.$emit('close')\n          });\n      },\n    },\n  };\n</script>\n\n<style scoped>\n  h2 {\n    text-align: center;\n  }\n\n  .cart {\n    position: fixed;\n    max-width: 400px;\n    min-width: 200px;\n    z-index: 10;\n    right: 15px;\n  }\n\n  .el-input-number--mini {\n    max-width: 100px;\n  }\n</style>\n\n","<template>\n  <div class=\"nav\">\n    <div class=\"container\">\n      <el-row>\n        <el-col :span=\"12\">\n          <router-link class=\"anchor\" to=\"/\">é¦é¡µ</router-link>\n          <a class=\"anchor\" href=\"#\">item</a>\n        </el-col>\n        <el-col class=\"text-right\" :span=\"12\">\n          <span @click=\"ui.showCart = !ui.showCart\" class=\"anchor\">è´­ç©è½¦ <span>({{cartCount}})</span></span>\n          <!--<a class=\"anchor\" href=\"#\">item</a>-->\n          <span v-if=\"session.loggedIn()\">\n            <router-link class=\"anchor\"\n                         to=\"/my/setting\">{{session.user('nickname') || session.user('mail') || session.user('phone') | cut(6) }}</router-link>\n            <span @click=\"session.logout()\" class=\"anchor\">ç»åº</span>\n          </span>\n          <span v-else>\n            <router-link class=\"anchor\" to=\"/login\">ç»å½</router-link>\n            <router-link class=\"anchor\" to=\"/signup\">æ³¨å</router-link>\n          </span>\n        </el-col>\n      </el-row>\n    </div>\n    <Cart @close=\"() => {ui.showCart = false}\" v-show=\"ui.showCart\"/>\n  </div>\n</template>\n\n<script>\n  import session     from '../lib/session';\n  import Cart        from './Cart';\n  import cartService from '../service/cart';\n\n  export default {\n    components : { Cart },\n    mounted () {\n      // å½è´­ç©è½¦ååçæ¹åï¼æ¾ç¤ºå¤å°ç§è´§\n      cartService.onChange(_ => {\n        this.cartCount = cartService.productCount();\n      });\n    },\n    data () {\n      return {\n        cartCount : 0,\n        ui        : {\n          showCart : false,\n        },\n        session,\n      };\n    },\n  };\n</script>\n\n<style scoped>\n  .nav {\n    background: rgba(0, 0, 0, .1);\n  }\n\n  .nav .anchor {\n    padding: .6em;\n  }\n</style>","<template>\n  <!-- æ­¤ç»ä»¶åªè´è´£æ¿åå°æç´¢çå³é®å­ å¹¶è·³è½¬å°æç´¢é¡µ åæ¶æºå¸¦è¿å³é®å­ä¼ å -->\n  <div class=\"nav\">\n    <div class=\"container\">\n      <el-row :gutter=\"10\">\n        <el-col :span=\"6\">\n          <router-link to=\"/\">\n            <div class=\"logo\">\n              <img src=\"../img/logo@2x.png\" alt=\"Logo\">\n            </div>\n          </router-link>\n        </el-col>\n        <el-col class=\"text-right\" :span=\"12\">\n          <form @submit.prevent=\"toSearch\" class=\"search\">\n            <el-input v-model=\"formSearch.keyword\" suffix-icon=\"el-icon-search\"></el-input>\n          </form>\n        </el-col>\n        <el-col :span=\"6\">\n          <div class=\"logo\">\n          </div>\n        </el-col>\n      </el-row>\n    </div>\n  </div>\n\n</template>\n\n<script>\n  import logo from '../img/logo.png';\n\n  export default {\n    data () {\n      return {\n        formSearch : {},\n        logo,\n      };\n    },\n    methods : {\n      // æç´¢ä¹å è·³è½¬è³æç´¢é¡µé¢\n      toSearch () {\n        this.$router.push({\n          path   : '/search',\n          // query æ¯ vue æä¾çä¸ç§ä¼ åæ¹å¼ ï¼ åé¢ç¨ & éå¼\n          query : this.formSearch,\n        });\n      },\n    },\n  };\n</script>\n\n<style scoped>\n  .logo {\n    max-width: 10em;\n    padding-top: 1em;\n    padding-bottom: 1em;\n  }\n\n  .search {\n    position: relative;\n    top: 15px;\n  }\n</style>","<template>\n  <div class=\"product-card\">\n    <el-card>\n      <router-link :to=\"`/product/${data.id}`\">\n        <img :src=\"data.main_img ? fileUrl(data.main_img[0]) : holder.productMainImg\"\n             class=\"image\">\n      </router-link>\n      <div style=\"padding: 14px;\">\n        <router-link :to=\"`/product/${data.id}`\">\n          <span>{{data.title | cut(27)}}</span>\n        </router-link>\n        <p>\n          <span class=\"hot cny\">{{data.price}}</span>\n        </p>\n      </div>\n    </el-card>\n  </div>\n</template>\n\n<script>\n  import { fileUrl } from '../lib/helper';\n  import holder      from '../config/holder';\n\n  export default {\n    props : [ 'data' ],\n    data() {\n      return {\n        holder\n      }\n    },\n    methods: {\n      fileUrl,\n    }\n  };\n</script>\n\n<style>\n  .product-card .el-card__body {\n    padding: 0;\n  }\n</style>","<template>\n    <div>\n      <RegularNav />\n      <div class=\"container carousel\">\n        <el-carousel :interval=\"4000\" type=\"card\" height=\"200px\">\n          <el-carousel-item v-for=\"it in list_carousel\" :key=\"it.id\">\n            <router-link :to=\"`/product/${it.id}`\">\n              <img :src=\"fileUrl(it.carousel_img)\" alt=\"\">\n            </router-link>\n          </el-carousel-item>\n        </el-carousel>\n      </div>\n      <div class=\"container\">\n        <h2>æ°å</h2>\n        <el-row :gutter=\"10\" class=\"card-list vartical-gutter\">\n          <el-col :key=\"it\" v-for=\"it in list_new\" :span=\"6\">\n            <ProductCard :data=\"it\" />\n          </el-col>\n        </el-row>\n      </div>\n      <div class=\"container\">\n        <h2>ä¿é</h2>\n        <el-row :gutter=\"10\" class=\"card-list vartical-gutter\">\n          <el-col :key=\"it\" v-for=\"it in list_hot\" :span=\"6\">\n            <ProductCard :data=\"it\" />\n          </el-col>\n        </el-row>\n      </div>\n    </div>\n</template>\n\n<script>\n  import RegularNav from '../components/RegularNav';\n  import ProductCard from '../components/ProductCard';\n  import { fileUrl } from '../lib/helper';\n\n  export default {\n    name: 'Home',\n    data() {\n      return {\n        list_new : [],\n        list_hot : [],\n        list_carousel : []\n      }\n    },\n    components: {\n      RegularNav,\n      ProductCard\n    },\n    methods: {\n      fileUrl,\n\n      read_new() {\n        api('product/read', {where: {and: {is_new: true}}})\n          .then( r => this.list_new = r.data)\n      },\n      read_hot() {\n        api('product/read', {where: {and: {is_hot: true}}})\n          .then( r => this.list_hot = r.data)\n      },\n      read_carousel() {\n        api('product/read', {where: {and: {is_carousel: true}}})\n          .then( r => this.list_carousel = r.data)\n      }\n    },\n    mounted() {\n      this.read_new();\n      this.read_hot();\n      this.read_carousel();\n    },\n  }\n</script>\n\n<style scoped>\n.el-carousel__item h3 {\n  color: #475669;\n  font-size: 14px;\n  opacity: 0.75;\n  line-height: 200px;\n  margin: 0;\n}\n\n.el-carousel__item:nth-child(2n) {\n  background-color: #99a9bf;\n}\n\n.el-carousel__item:nth-child(2n+1) {\n  background-color: #d3dce6;\n}\n\n.carousel {\n  margin-top: 1em;\n}\n</style>\n","<template>\n  <div>\n    <RegularNav/>\n    <div class=\"container overview\">\n      <el-row :gutter=\"10\" class=\"overview\">\n        <el-col class=\"preview\" :span=\"10\">\n          <el-carousel indicator-position=\"outside\">\n            <!-- <el-carousel-item v-if=\"!row.main_img || !row.main_img.length == 0\">\n              <img :src=\"holder.productMainImg\" alt=\"\">\n            </el-carousel-item> -->\n            <el-carousel-item v-for=\"it in row.main_img\" :key=\"it.id\">\n              <img class=\"main_ing\" :src=\"fileUrl(it)\" alt=\"\">\n            </el-carousel-item>\n          </el-carousel>\n        </el-col>\n        <el-col class=\"text\" :span=\"14\">\n          <h1 class=\"title\">{{row.title}}</h1>\n          <div class=\"well\">\n            <dl class=\"pair\">\n              <dt>ä»·æ ¼</dt>\n              <dd class=\"hot cny\">{{row.price}}</dd>\n            </dl>\n            <dl class=\"pair\">\n              <dt>è¿è´¹</dt>\n              <dd class=\"cny\">{{row.shipping_fee}}</dd>\n            </dl>\n          </div>\n          <el-row>\n            <el-col :span=\"8\">\n              æéé <span class=\"hot\">222</span>\n            </el-col>\n            <el-col :span=\"8\">\n              ç´¯è®¡è¯ä»· <span class=\"hot\">325</span>\n            </el-col>\n            <el-col :span=\"8\">\n              åºå­ <span class=\"hot\">{{row.total}}</span>\n            </el-col>\n          </el-row>\n          <dl :key=\"options\" v-for=\"(options, key) in row.prop\" class=\"pair\">\n            <dt>{{key}}</dt>\n            <dd>\n              <div :class=\"'pill-option ' + (form.prop[key] === option ? 'active': '')\" @click=\"setProp(key, option)\" :key=\"option\" v-for=\"option in options\">{{option}}</div>\n            </dd>\n          </dl>\n          <dl class=\"pair\">\n            <dt>æ°é</dt>\n            <dd>\n              <el-input-number v-model=\"form.count\" size=\"mini\" :min=\"1\" label=\"æè¿°æå­\"></el-input-number>\n            </dd>\n          </dl>\n          <div class=\"text-left\">\n            <el-button @click=\"createOrder\" size=\"small\" type=\"danger\">ç«å³è´­ä¹°</el-button>\n            <el-button @click=\"addToCart\" size=\"small\" type=\"primary\">å å¥è´­ç©è½¦</el-button>\n          </div>\n          <dl class=\"pair\">\n            <dt>æå¡æ¿è¯º</dt>\n            <dd>\n              <a class=\"anchor\" href=\"#\">ç ´æåé</a>\n              <a class=\"anchor\" href=\"#\">æ­£åä¿è¯</a>\n              <a class=\"anchor\" href=\"#\">æééæ¬¾</a>\n              <a class=\"anchor\" href=\"#\">ä¸å¤©æ çç±éæ¢</a>\n              <a class=\"anchor\" href=\"#\">æ¯ä»æ¹å¼</a>\n            </dd>\n          </dl>\n        </el-col>\n      </el-row>\n    </div>\n    <div class=\"container detail\">\n      <div class=\"props\">\n        <el-row>\n          <el-col class=\"pair\" :span=\"8\">\n            <div>çäº§è®¸å¯è¯ç¼å·</div>\n            <div>SC12543062605639</div>\n          </el-col>\n          <el-col class=\"pair\" :span=\"8\">\n            <div>äº§åæ åå·</div>\n            <div>Q/YPXY 0002S</div>\n          </el-col>\n          <el-col class=\"pair\" :span=\"8\">\n            <div>åå</div>\n            <div>å¹³æ±å¿æ°ç¿å®é£åæéå¬å¸</div>\n          </el-col>\n          <el-col class=\"pair\" :span=\"8\">\n            <div>äº§åæ åå·</div>\n            <div>Q/YPXY 0002S</div>\n          </el-col>\n          <el-col class=\"pair\" :span=\"8\">\n            <div>çäº§è®¸å¯è¯ç¼å·</div>\n            <div>SC12543062605639</div>\n          </el-col>\n          <el-col class=\"pair\" :span=\"8\">\n            <div>äº§åæ åå·</div>\n            <div>Q/YPXY 0002S</div>\n          </el-col>\n          <el-col class=\"pair\" :span=\"8\">\n            <div>åå</div>\n            <div>å¹³æ±å¿æ°ç¿å®é£åæéå¬å¸</div>\n          </el-col>\n          <el-col class=\"pair\" :span=\"8\">\n            <div>äº§åæ åå·</div>\n            <div>Q/YPXY 0002S</div>\n          </el-col>\n          <el-col class=\"pair\" :span=\"8\">\n            <div>çäº§è®¸å¯è¯ç¼å·</div>\n            <div>SC12543062605639</div>\n          </el-col>\n          <el-col class=\"pair\" :span=\"8\">\n            <div>äº§åæ åå·</div>\n            <div>Q/YPXY 0002S</div>\n          </el-col>\n          <el-col class=\"pair\" :span=\"8\">\n            <div>åå</div>\n            <div>å¹³æ±å¿æ°ç¿å®é£åæéå¬å¸</div>\n          </el-col>\n          <el-col class=\"pair\" :span=\"8\">\n            <div>äº§åæ åå·</div>\n            <div>Q/YPXY 0002S</div>\n          </el-col>\n        </el-row>\n      </div>\n      <div class=\"content\">\n        <div :key=\"it\" v-for=\"it in row.detail\">\n          <div class=\"text\" v-if=\"it.type === 'text'\">{{it.value}}</div>\n          <div class=\"text\" v-else>\n            <img :src=\"fileUrl(it.value)\" :alt=\"it.value.name\">\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n  import RegularNav      from '../components/RegularNav';\n  import { fileUrl }     from '../lib/helper';\n  import { createOrder } from '../lib/order';\n  import session         from '../lib/session';\n  import cartService     from '../service/cart';\n  import holder          from '../config/holder';\n\n  export default {\n    components : { RegularNav },\n    name: 'Product',\n    data () {\n      return {\n        holder,\n        cartService,\n\n        form : {\n          count : 1,\n          prop  : {},\n        },\n        row  : {\n          id : null,\n        },\n      };\n    },\n    mounted () {\n      this.row.id = this.$route.params.id;\n      this.find();\n    },\n    methods    : {\n      fileUrl,\n\n      // å½ç¹å»ä¸ªæ§å±æ§æ§è¡çå½æ°ï¼ æ¯å¦è¯´  è¾£åº¦ï¼ç¹è¾£ \n      setProp (key, value) {\n        this.$set(this.form.prop, key, value);\n      },\n\n      // æ·»å å°è´­ç©è½¦\n      addToCart () {\n        let row  = this.row;\n        let form = this.form;\n\n        if (!this.validateForm())\n          return;\n\n        cartService.change(row.id, form.count, row, form.prop);\n      },\n\n      // ç¹å»è´­ä¹°è¯¥æ§è¡çå½æ°ï¼ product_snapshot å½åè¦è´­ä¹°ååä¿¡æ¯çå¿«ç§\n      createOrder () {\n        let p = this.row;\n        let f = this.form;\n\n        f.product_id       = p.id;\n        f.product_snapshot = p;\n\n        // order æ¯ä¸æ¡è®¢åæ°æ®ï¼è this.form ä»ä»æ¯ä¸ä¸ªåå ç» order èªå®ä¹æ·»å ç detail å±æ§  åæ·»å  sum å±æ§ï¼  detail: [this.form] åè®¸æ·»å å¤æ¡ä¹å°±æ¯å¯ä»¥è´­ä¹°å¤ä¸ª è´­ç©è½¦çå½¢å¼\n        // let order = { detail: [this.form] }\n        // order.sum = orderSum(order.detail);\n        // order.user_id = session.user('id');\n        // order.status = 'created';\n\n        if (!this.validateForm())\n          return;\n\n        // ç¹å»è´­ä¹°ä¹åï¼ç´æ¥è·³è½¬è³è®¢åè¯¦æé¡µ\n        // api('order/create', order)\n        //   .then( (r) => {\n        //     this.$router.push(`/my/order/${r.data.id}`)\n        //   });\n\n        // éæç´æ¥è´­ä¹°åè½  this.form æäº¤çé£ä¸ªè¡¨å  session.user('id') å°±æ¯è°çè®¢å  ï¼éæä¹åï¼è®¢åå¨é¨ç± order.js çæçï¼\n        createOrder([ f ], session.user('id'))\n          .then(r => {\n            this.$router.push(`/my/order/${r.data.id}`);\n          });\n      },\n\n      // æ·»å ååéªè¯\n      validateForm () {\n        if (session.isAdmin()) {\n          alert('ç®¡çåæä¸å¯è´­ä¹°åå');\n          return;\n        }\n\n        if (!this.allPropsChecked()) {\n          alert('è¯·éæ©ææå±æ§éé¡¹');\n          return false;\n        }\n\n        if (!this.form.count) {\n          alert('è¯·éæ©æ°é');\n          return false;\n        }\n\n        return true;\n      },\n\n      // å¨åå»ºä¸æ¡è®¢åä¹åï¼é¦åè¦éªè¯ æ¯ä¸ªä¸ªæ§å±æ§é½å¿é¡»æéä¸­çéé¡¹  å¾ªç¯propéé¢ææçä¸ªæ§å±æ§ï¼ä¸æ¦ææ²¡éä¸­çå°±è¿åfalse\n      allPropsChecked () {\n        let p = this.row.prop;\n        for (let key in p) {\n          if (!this.form.prop[ key ])\n            return false;\n        }\n\n        return true;\n      },\n\n      find () {\n        api('product/find', this.row)\n          .then(r => {\n            this.row = r.data;\n            this.normalize();\n          });\n      },\n\n      // æ¿å°æ°æ®ååå²å¥½æ¸²æ ç¨ propList æ¿æ¢æ row éé¢ç prop\n      normalize () {\n        let p          = this.row.prop;\n        let betterProp = {};\n\n        for (let key in p) {\n          let options       = p[ key ];\n          betterProp[ key ] = options.split('|');\n        }\n\n        this.$set(this.row, 'prop', betterProp);\n      },\n    },\n  };\n</script>\n\n<style scoped>\n  .el-carousel__item h3 {\n    color: #475669;\n    font-size: 18px;\n    opacity: 0.75;\n    line-height: 300px;\n    margin: 0;\n  }\n  \n  .el-carousel__item:nth-child(2n) {\n    background-color: #99a9bf;\n  }\n  \n  .el-carousel__item:nth-child(2n+1) {\n    background-color: #d3dce6;\n  }\n\n  .pair > *:nth-child(odd) {\n    font-size: 80%;\n    margin-right: 3em;\n  }\n\n  .overview .hot.cny {\n    font-size: 120%;\n  }\n\n  .title {\n    font-size: 1.1rem;\n  }\n\n  .detail > *,\n  .text > * {\n    margin-bottom: .8em;\n  }\n\n  .pill-option {\n    display: inline-block;\n    margin-right: .5em;\n    padding: .3em .5em;\n    border: 2px solid rgba(0, 0, 0, .2);\n    font-size: 80%;\n    cursor: default;\n  }\n\n  .pill-option.active {\n    border-color: #e10;\n  }\n\n  .pill-option.selected {\n    border-color: #e10;\n  }\n\n  .props {\n    border: 1px solid rgba(0, 0, 0, .1);\n    padding: 1em;\n    font-size: 80%;\n    color: #666;\n  }\n\n  .props .el-col {\n    margin-bottom: .3em;\n  }\n\n  .props .pair > * {\n    margin-right: 0;\n    margin-left: 0;\n  }\n\n  .props .pair > *:nth-child(odd) {\n    width: 40%;\n  }\n\n  .props .pair > *:nth-child(even) {\n    width: 60%;\n  }\n\n  .main_ing {\n    display: block;\n    width: 100%;\n  }\n</style>","<template>\n  <el-row>\n    <el-col :span=\"3\" class=\"type\">{{propName}}</el-col>\n    <el-col :span=\"21\">\n      <div \n        @click=\"select(it)\" \n        :key=\"it\" \n        v-for=\"it in data\" \n        :class=\"'option ' + ((selected && (selected.id == it.id)) ? 'active' : '')\"\n      >\n        {{it.name}}\n      </div>\n    </el-col>\n  </el-row>\n</template>\n\n<script>\n  export default {\n    props   : [ 'data', 'propName', 'initial' ],\n    data () {\n      return {\n        selected : null,      // å¯¹è±¡ç»æ\n      };\n    },\n    mounted() {\n      // å¦æç¶åç´ ä¼ äº initial æä¸ç§å±æ§åç±»ä¸çæä¸é¡¹ï¼åä¸å¼å§å°±éä¸­é£ä¸é¡¹å¹¶ç­éç»æ\n      if(this.initial)\n        this.selected = this.initial;\n    },\n    methods : {\n      // it ä¸ä¸ªç§ç±»é¡¹ï¼ å¦ææä¸ä¸ªç§ç±»å½åè¢«éä¸­ ä¸ åæ¬¡è¢«éä¸­ å°±åæ¶è¢«éä¸­ä¸æ¸ç©ºå½åç¬¦åéä¸­æ¡ä»¶çåå\n      select (it) {\n        if (this.selected && (this.selected.id == it.id)) {\n          this.selected = null;\n          this.$emit('clear', it);\n          return;\n        }\n        // å¦åå°±æ¢ å­ç¶éä¿¡ \n        this.selected = it;\n        this.$emit('change', it);\n      },\n    },\n    // çå¬ ä¸æ¦ initial æååæ§è¡ select ä¼ å¥ææ°çå¼\n    watch: {\n      initial(n) {\n        this.select(n);\n      }\n    }\n  };\n</script>\n\n<style scoped>\n  .filter .type,\n  .filter .option {\n    display: inline-block;\n    cursor: pointer;\n    padding: 1em;\n  }\n\n  .filter .option.active {\n    background: #409EFF;\n    color: #fff;\n  }\n</style>","<template>\n  <div>\n    <div class=\"container\">\n      <el-row :gutter=\"10\">\n        <el-col :span=\"6\">\n          <router-link to=\"/\">\n            <div class=\"logo\">\n              <img src=\"../img/logo@2x.png\" alt=\"Logo\">\n            </div>\n          </router-link>\n        </el-col>\n        <el-col class=\"text-right\" :span=\"12\">\n          <form @submit.prevent=\"reload\" class=\"search\">\n            <el-input v-model=\"q.keyword\" suffix-icon=\"el-icon-search\"></el-input>\n          </form>\n        </el-col>\n        <el-col :span=\"6\">\n          <div class=\"logo\">\n\n          </div>\n        </el-col>\n      </el-row>\n    </div>\n    <div class=\"container\">\n      <div class=\"filter\">\n        <div class=\"table\">\n          <FilterProp @change=\"setPropFilter('cat_id', $event)\"\n                      @clear=\"removePropFilter('cat_id')\"\n                      propName=\"åç±»\"\n                      :initial=\"filterRestore.cat_id\"\n                      :data=\"listCat\"/>\n          <FilterProp @change=\"setPropFilter('brand_id', $event)\"\n                      @clear=\"removePropFilter('brand_id')\"\n                      propName=\"åç\"\n                      :initial=\"filterRestore.brand_id\"\n                      :data=\"listBrand\"/>\n        </div>\n        <div class=\"bar\">\n          <div class=\"group\">\n            <el-button-group>\n              <el-button :type=\"q.sortBy == 'id' ? 'primary' : ''\" @click=\"setSortBy('id')\" size=\"mini\">æ°å\n                <span v-if=\"q.sortBy == 'id'\">\n                  <i v-if=\"q.sortUp == 1\" class=\"el-icon-caret-top\"></i><i v-else class=\"el-icon-caret-bottom\"></i>\n                </span>\n              </el-button>\n              <el-button :type=\"q.sortBy == 'price' ? 'primary' : ''\" @click=\"setSortBy('price')\" size=\"mini\">ä»·æ ¼\n                <span v-if=\"q.sortBy == 'price'\">\n                  <i v-if=\"q.sortUp == 1\" class=\"el-icon-caret-top\"></i><i v-else class=\"el-icon-caret-bottom\"></i>\n                </span>\n              </el-button>\n              <el-button :type=\"q.sortBy == 'sales' ? 'primary' : ''\" @click=\"setSortBy('sales')\" size=\"mini\">éé\n                <span v-if=\"q.sortBy == 'sales'\">\n                  <i v-if=\"q.sortUp == 1\" class=\"el-icon-caret-top\"></i><i v-else class=\"el-icon-caret-bottom\"></i>\n                </span>\n              </el-button>\n            </el-button-group>\n          </div>\n          <div id=\"price-filter\" class=\"group\">\n            <el-col :span=\"12\">\n              <input @keyup=\"reload\"\n                     v-model=\"q.minPrice\"\n                     size=\"mini\"\n                     placeholder=\"æåºä»·æ ¼\"\n              >\n              </input>\n            </el-col>\n            <el-col :span=\"12\">\n              <input @keyup=\"reload\"\n                     v-model=\"q.maxPrice\"\n                     size=\"mini\"\n                     placeholder=\"æé«ä»·æ ¼\"\n              >\n              </input>\n            </el-col>\n          </div>\n          <div class=\"group\">\n            <label>\n              <input @click=\"toggleBool('freeShipping')\"\n                     :checked=\"q.freeShipping\"\n                     type=\"checkbox\">\n              åé®\n            </label>\n            <label>\n              <input @click=\"toggleBool('hasDiscount')\"\n                     :checked=\"q.hasDiscount\"\n                     type=\"checkbox\">\n              ææ£\n            </label>\n            <label>\n              <input @click=\"toggleBool('cod')\"\n                     :checked=\"q.cod\"\n                     type=\"checkbox\">\n              è´§å°ä»æ¬¾\n            </label>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"container\">\n      <div class=\"result\">\n        <el-row :gutter=\"5\" class=\"card-list vertical-gutter\">\n          <el-col :key=\"it\" v-for=\"it in list\" :span=\"6\">\n            <ProductCard :data=\"it\"/>\n          </el-col>\n        </el-row>\n        <el-pagination v-if=\"total != 0\"\n                       :total=\"total\"\n                       class=\"text-center\"\n                       layout=\"prev, pager, next\"\n                       :page-count=\"q.limit\"\n                       :current-page=\"q.page\"  \n                       @current-change=\"flip\"\n        >              <!-- current-page ä¸å¼å§ç­äºç©º å½ååäºå´æåºä¸å°åå  æä»¥ç¨ v-if=\"total != 0 -->\n        </el-pagination>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n  import RegularNav     from '../components/RegularNav';\n  import ProductCard    from '../components/ProductCard';\n  import { capitalize } from '../lib/helper';\n  import FilterProp     from '../components/search/FilterProp';\n\n  export default {\n    components : { FilterProp, ProductCard, RegularNav },\n    data () {\n      return {\n        list          : [],    // ç¨æ¥å­å¨ æç´¢æ¥è¯¢è¿åæ¥çæ°æ®\n        total         : 0,     // ç¨æ¥å­å¨ æç´¢æ¥è¯¢è¿åæ¥çæ»æ°\n        listCat       : [],    // ç¨æ¥å­å¨ åç±»è¿åæ¥çæ°æ®\n        listBrand     : [],    // ç¨æ¥å­å¨ åçè¿åæ¥çæ°æ®\n        filterRestore : {\n          // brand_id: {           æ°æ®ç»æå°±æ¯è¿æ ·\n          //   id: 1,\n          //   name: 'lcd'\n          // }\n        },\n        q             : { // å°åä¼ åçæå­åºï¼this.$route.queryçæ·è´ï¼ ä¸å¼æ¯å¨ mounted éæ·è´ åé¢ååå¨ $route éæ·è´\n          page  : 1,\n          limit : 16,\n          sortBy: 'id'\n        },\n      };\n    },\n\n    mounted () {\n      this.q = { ...this.q, ...this.$route.query, page : parseInt(this.$route.query.page) };  // ç´æ¥åæéè¦çæ°æ®æ·è´å° q éé¢\n      this.read('cat');                                                                       // æ¥è¯¢ä¸æ¬¡ cat åç±»\n      this.read('brand');                                                                     // æ¥è¯¢ä¸æ¬¡ brand åç±»\n      this.search();                                                                          \n      this.restoreSelectedPropFilter('brand', this.q[ '@brand_id' ], 'brand_id');             // éè¿å±æ§ç­éå¶ä¸­æä¸é¡¹\n      this.restoreSelectedPropFilter('cat', this.q[ '@cat_id' ], 'cat_id');                   // éè¿å±æ§ç­éå¶ä¸­æä¸é¡¹\n    }, \n    methods    : {\n      /** \n       * éè¿å±æ§è¿æ»¤å¨çå·²æä¼ åæ¾å°å¯¹åºçæ°æ® å¦ï¼'http://...?...&@cat_id=1' å°±åºè¯¥å¯»æ¾id = 1çé£æ¡catæ°æ®ï¼å¹¶å°å¶\n       * å­å¥this.filterRestoreåé¨ï¼ç¶åå°å¶ ä¼ å¥<FilterProp/>ç»ä»¶ä¸­çinitialå±æ§ä¸­ï¼<FilterProp :initial=\"filterRestore.cat_id\"/>\n       *\n       * @param model        æ¯å¦ cat æ brand\n       * @param id           æ¯å¦  this.q[ '@brand_id' ] æ this.q[ '@cat_id' ]\n       * @param filterName   æ¯å¦ brand_id æ cat_id\n       */\n      restoreSelectedPropFilter (model, id, filterName) {\n        // æ²¡æéæ©  cat æ brand ä¸­çä»»ä½éé¡¹ å°±ä¸ç¨ç­éå¨é¨æ¾ç¤º\n        if (!id)\n          return;\n        // æ¾å° cat æ brand ä¸çæä¸é¡¹\n        api(`${model}/find`, { id })\n          .then(r => {\n            this.$set(this.filterRestore, filterName, r.data);\n          });\n      },\n\n      // éè¿å­ç¶éä¿¡çèªå®ä¹äºä»¶å½æ° å½æä¸ä¸ªç§ç±»åçæ¹åï¼ç­éçååä¹è¦è·çå  prop : cat_id æ brand_idï¼  it å°±æ¯åç±»éé¢éä¸­çé£ä¸é¡¹\n      setPropFilter (prop, it) {\n        this.q[ '@' + prop ] = it.id;\n        this.reload();\n      },\n\n      //  éè¿å­ç¶éä¿¡çèªå®ä¹äºä»¶å½æ°  æ¸ç©ºç¬¦åçç­éé¡¹  prop : cat_id æ brand_id\n      removePropFilter (prop) {\n        delete this.q[ '@' + prop ];\n        this.reload();\n      },\n\n      //  ç¨æ¥æ¥è¯¢ æ¿å°æ´ä¸ªåç±» æ åçåç±»ä¸çååæ°æ®\n      read (type) {\n        api(`${type}/read`)\n          .then(r => this[ 'list' + capitalize(type) ] = r.data);\n      },\n\n      // ç­éå½æ° éè¿åé®ææ£è¿æ¯è´§å°ä»æ¬¾ æ¥å¯¹åååç±»  å¦æç­éå·²ç»å­å¨è¯´æå·²æé®å type å°±å æå®ï¼å¦åå°±æ¾ç¤º ç­éé®åç­äº1\n      toggleBool (type) {\n        if (this.q[ type ])\n          delete this.q[ type ];\n        else\n          this.q[ type ] = '1';\n\n        this.reload();\n      },\n\n      // ç­éå½æ° éè¿æ°åä»·æ ¼è¿æ¯éé æ¥å¯¹ååæåº\n      setSortBy (type) {\n        // é¦åå¤æ­æ¯ æ°åä»·æ ¼è¿æ¯éé\n        if (this.q.sortBy == type) {\n          // åæ¬¡ç¹å» ç¶ååå¤æ­ å¦ææ¯ååºåç¹ä¸ä¸å°± else å¦åå°±ç­äº 1 \n          if (!this.q.sortUp)\n            this.q.sortUp = '1';\n          else\n            delete this.q.sortUp;\n        }\n\n        this.q.sortBy = type;\n\n        this.reload();\n      },\n\n      // æäº¤è¡¨åä¹å è·¯ç± $router åçåå watch è¯å®ä¼æ§è¡  ï¼ä¹å°±æ¯è¯´æäº¤æç´¢ä¹åï¼åè§¦å reload ()ï¼ æ¹åè·¯ç±ãåå¨ watch ä¸­çæ§æ¹åæç´¢é¡µé¢ ï¼\n      reload () {\n        this.$router.push({\n          path  : '/search',\n          query : { ...this.q },\n        });\n      },\n      forEachPropFilter (fn) {\n        let q = this.q;\n        for (let key in q) {\n          if (!key.startsWith('@'))\n            continue;\n\n          fn(q[ key ], key);\n        }\n      },\n\n      // ç¿»é¡µ\n      flip (page) {\n        this.q.page = page;\n        this.reload();\n      },\n\n      // çæ­£åè¯·æ±ï¼å¼å§æç´¢ \n      search () {\n        let q = this.q;\n\n        let keywordQuery      = `\"title\" contains \"${q.keyword}\"`;\n        let minPriceQuery     = q.minPrice ? `and \"price\" >= ${q.minPrice}` : '';\n        let maxPriceQuery     = q.maxPrice ? `and \"price\" <= ${q.maxPrice}` : '';\n        let freeShippingQuery = q.freeShipping ? `and \"shipping_fee\" = 0` : '';\n        let hasDiscountQuery  = q.hasDiscount ? `and \"discount\" > 0` : '';\n        let codQuery          = q.cod ? `and \"cod\" = 1` : '';\n        let propFilterQuery   = '';     \n\n        /**\n         * æ¬è´¨å°±æ¯å°ä¸é¢çè¿ç§ç±»å è½¬æ¢ä¸º ä¸é¢çæ¥è¯¢è¯­å¥ç±»å   ï¼åç±» åç å¤ä¸ªå¤§åç±»ä¸çç­éï¼\n         * {\n         *   '@cat_id': 1\n         *   '@brand_id': 2\n         *   'sortBy': ['a']\n         * }\n         * è½¬æ¢å\n         * 'and \"cat_id\" = 1 and \"brand_id\" = 2'\n         */\n        this.forEachPropFilter((value, key) => {\n          let prop = key.slice(1);\n          propFilterQuery += ` and \"${prop}\" = \"${value}\" `;\n        });\n\n        // ææç å­æ¥è¯¢æ¡ä»¶ æ¯å¦ææ²¡æ å³é®å­ æä½ä»·æ ¼ æé«ä»·æ ¼ åé® ææ£ è´§å°ä»æ¬¾ç­ï¼  propFilterQuery éè¿æä¸ç§åç±»æåçå\n        let query = `where(\n          ${keywordQuery}\n          ${minPriceQuery}\n          ${maxPriceQuery}\n          ${freeShippingQuery}\n          ${hasDiscountQuery}\n          ${codQuery}\n          ${propFilterQuery}\n        )`;\n\n        let param = {\n          query,\n          sort_by : [ (q.sortBy || 'id'), q.sortUp ? 'up' : 'down' ],     // æ¯çåºæåè¿æ¯éåº\n          limit   : this.limit,\n          page    : q.page,\n          limit   : q.limit,\n        };\n\n        api('product/read', param)\n          .then(r => {\n            this.list  = r.data;\n            this.total = r.total;\n          });\n      },\n    },\n\n    // RegularNav ç»ä»¶ä¸­æäºå³é®å­çåå æä»¥æçæ§ $route çåå ä¸åé½æ¯éè¿ $route è§¦åç ï¼ ä¸æ¦ $route åçåå this.q å°±æ·è´ä¸ä»½\n    watch      : {\n      $route : {\n        deep : true,\n        // ä¸æ¦è·¯ç±åçååï¼ handler å°ä¼æ§è¡ï¼åå»æç´¢\n        handler (news, old) {\n          this.q = { ...this.q, ...news.query, page : parseInt(news.query.page) };\n          this.search();\n        },\n      },\n    },\n  };\n</script>\n\n<style scoped>\n  .search {\n    margin-top: 1em;\n    margin-bottom: 1em;\n  }\n\n  .filter {\n    color: #666;\n  }\n\n  .filter > * {\n    margin-bottom: .5em;\n  }\n\n  .filter .table > * {\n    border: 1px solid rgba(0, 0, 0, .1);\n    border-bottom-width: 0;\n  }\n\n  .filter .table > *:last-child {\n    border-bottom-width: 1px;\n  }\n\n  .filter .type {\n    font-size: 90%;\n    opacity: .8;\n  }\n\n\n  .bar > * {\n    display: inline-block;\n    vertical-align: middle;\n  }\n\n  .bar .group {\n    margin-right: .5em;\n  }\n\n  #price-filter {\n    max-width: 14em;\n  }\n\n  #price-filter input {\n    width: 100%;\n  }\n\n\n  .el-checkbox {\n    margin-right: .5em;\n  }\n</style>","<template>\n  <div>\n    <el-row :gutter=\"10\">\n      <el-col :span=\"4\">\n        <el-menu\n          default-active=\"cart\"\n          :router=\"true\"\n          class=\"el-menu-vertical-demo\"\n          @open=\"handleOpen\"\n          @close=\"handleClose\">\n          <el-menu-item class=\"side-focus\" index=\"cart\">\n            <span slot=\"title\">è´­ç©è½¦</span>\n          </el-menu-item>\n          <el-menu-item class=\"side-focus\" index=\"order\">\n            <span slot=\"title\">è®¢å</span>\n          </el-menu-item>\n          <el-menu-item class=\"side-focus\" index=\"settings\">\n            <span slot=\"title\">è®¾ç½®</span>\n          </el-menu-item>\n        </el-menu>\n      </el-col>\n      <el-col :span=\"20\">\n        <router-view></router-view>\n      </el-col>\n    </el-row>\n  </div>\n</template>\n\n<script>\n  export default {\n    name: 'My',\n    components: {\n    },\n    methods: {\n      handleOpen () {},\n      handleClose () {}\n    },\n  }\n</script>\n\n<style>\n  .side-focus:focus {\n    color: tomato;\n  }\n</style>","<template>\n  <div>\n    <h1>æçè®¢å</h1>\n    <el-card class=\"detail\" v-if=\"$route.params.id\">\n      <div slot=\"header\" class=\"clearfix\">\n        <span>è®¢åè¯¦æ</span>\n        <router-link style=\"float: right;\" to=\"/my/order\">å³é­</router-link>\n        <!--<el-button style=\"float: right; padding: 3px 0\" type=\"text\">æä½æé®</el-button>-->\n      </div>\n      <div class=\"card-content\">\n        <div class=\"pair\">\n          <div>è®¢åå·</div>\n          <div>{{form.id}}</div>\n        </div>\n        <div class=\"pair\">\n          <div>æ»ä»·</div>\n          <div class=\"cny\">{{form.sum}}</div>\n        </div>\n        <div class=\"pair\">\n          <div>ä»æ¬¾æ¹å¼</div>\n          <div>{{lang.payment[form._pay_by] || '-'}}</div>\n        </div>\n        <div class=\"pair\">\n          <div>è®¢åç¶æ</div>\n          <div>{{form._paid ? 'å·²æ¯ä»': 'æªæ¯ä»'}}</div>\n        </div>\n\n        <div v-if=\"!form._paid\" style=\"margin-top: 1em;\">\n          <div class=\"title\">è¯·éæ©æ¯ä»æ¹å¼</div>\n          <p>æµè¯æ¯ä»ä»·æ ¼ä¸ä¼è¶è¿0.2å</p>\n          <el-button @click=\"generatePaymentUrl('wechat')\">å¾®ä¿¡æ¯ä»</el-button>\n          <el-button @click=\"generatePaymentUrl('alipay')\">æ¯ä»å®</el-button>\n\n          <div v-if=\"form.$payment\">\n            <p v-if=\"form._pay_by === 'wechat'\">\n              <img class=\"qrcode\" :src=\"form.$payment.qrcode\" alt=\"æ¯ä»äºç»´ç \">\n              <el-button type=\"primary\" @click=\"read(); find()\">æ¯ä»å®æ¯</el-button>\n            </p>\n            <p v-else>\n              <a :href=\"form.$payment.url\">è·³è½¬æ¯ä»å®æ«ç æ¯ä»</a>\n            </p>\n          </div>\n        </div>\n      </div>\n    </el-card>\n    <el-table\n            :data=\"list\"\n            stripe\n            style=\"width: 100%\">\n      <el-table-column\n              prop=\"id\"\n              label=\"è®¢åå·\"\n              width=\"100\">\n      </el-table-column>\n      <el-table-column\n              prop=\"sum\"\n              label=\"æ»ä»·\"\n              width=\"50\">\n      </el-table-column>\n      <el-table-column\n              label=\"ç¶æ\"\n              width=\"180\">\n        <template slot-scope=\"scope\">\n          {{scope.row._paid ? 'å·²æ¯ä»': 'æªæ¯ä»'}}\n        </template>\n      </el-table-column>\n      <el-table-column\n              fixed=\"right\"\n              label=\"æä½\"\n              width=\"100\">\n        <template slot-scope=\"scope\">\n          <el-button type=\"text\" size=\"small\">\n            <router-link :to=\"`/my/order/${scope.row.id}`\">è¯¦æ</router-link>\n          </el-button>\n        </template>\n      </el-table-column>\n\n    </el-table>\n  </div>\n</template>\n\n<script>\n  import session from '../lib/session';\n  import { url } from '../lib/helper';\n\n  export default {\n    data () {\n      return {\n        form   : {},\n        list   : [],\n        params : {},\n        lang   : {\n          payment : {\n            alipay : 'æ¯ä»å®',\n            wechat : 'å¾®ä¿¡æ¯ä»',\n          },\n          status  : {\n            created : 'æªæ¯ä»',\n            paid    : 'å·²æ¯ä»',\n          },\n        },\n      };\n    },\n    // é¡µé¢æè½½ä¹å åæ§è¡ read æ¿å°ç¨æ·çè®¢åæ°æ®\n    mounted () {\n      this.read();\n      // å¦æç¹å»äºæä¸æ¡ å°±æ this.$route.params.id çå¼èµå¼ç» this.form.id ç¶åéè¿ find() å»æ¥æ¾ id: this.form.id æ»¡è¶³æ¡ä»¶çç»æ\n      this.form.id = this.$route.params.id;\n      if (this.form.id)\n        this.find();\n    },\n    methods : {\n      find () {\n        api('order/find', { id : this.form.id })\n          .then(r => this.form = r.data);\n      },\n      read () {\n        api('order/read', { where : { and : { user_id : session.user('id') } } })\n          .then(r => this.list = r.data);\n      },\n      // ç¹å»ç¨ä»ä¹æ¯ä» ä¹åæ§è¡çå½æ°\n      generatePaymentUrl (type) {\n        // é¿åç¬¬ä¸æ¬¡éä¸­åæ æ³åæ¬¡æ´æ¹ \n        this.form._pay_by = type;\n        api('order/payment/url', {\n          id         : this.form.id,\n          pay_by     : type,\n          fee        : .2,\n          return_url : url('#/my/order'),\n        })\n          .then(r => {\n            this.$set(this.form, '$payment', r.data);\n          });\n      },\n    },\n    // æ·±åº¦çå¬ ä¸æ¦æ news.params è¯´æå°±ç¹å»æ°çå¼äº å°±éæ°æ§è¡ find()\n    watch : {\n      '$route' : {\n        handler (n, o) {\n          let params = n.params;\n          if (params.id) {\n            this.form.id = params.id;\n            this.find();\n          }\n        },\n        deep : true,\n      },\n    },\n  };\n</script>\n\n<style scoped>\n  .card-content {\n    padding: 1em;\n  }\n\n  .detail .title {\n    margin: .5em 0;\n  }\n\n  .qrcode {\n    max-width: 200px;\n  }\n</style>\n","form .title {\n  font-weight: bold;\n  display: block;\n}","<template>\n            <!--  ä¸æèå  -->\n  <div>\n    <div class=\"dropdown\">\n      <div class=\"filter\">\n        <input @focus=\"visible=true; reset()\"\n               :class=\"className\"\n               @blur=\"hideResult(); $emit('blur')\"\n               type=\"search\"\n               v-model=\"keyword\"\n        >\n      </div>\n      <div v-if=\"visible\" class=\"list\">\n        <div :key=\"it\" @mousedown=\"select(it)\" v-for=\"it in result\" class=\"option\">{{it[displayBy]}}</div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n  import api from '../lib/api';\n\n  export default {\n    props   : [\n      'list', 'searchBy',\n      'displayBy', 'onSelect',\n      'api', 'className',\n    ],\n    data () {\n      return {\n        visible : false,\n        keyword : '',\n        result  : [],\n        timer   : null,\n      };\n    },\n    mounted () {\n      if (this.api) {\n        this.filterAsync();\n      } else {\n        this.result = [ ...this.list ];\n        // this.list.find(it => {\n        //   return it[]\n        // })\n      }\n    },\n    methods : {\n      hideResult () {\n        setTimeout(() => {\n          this.visible = false;\n        }, 1);\n      },\n      reset () {\n        this.keyword = '';\n        this.select(null);\n      },\n      select (it) {\n        if (it)\n          this.keyword = it[ this.displayBy ];\n\n        if (!it || !this.onSelect)\n          return;\n\n        this.onSelect(it);\n      },\n      filter () {\n        this.result = this.list.filter(it => {\n          return it[ this.searchBy ].includes(this.keyword);\n        });\n      },\n      filterAsync () {\n        let params = {};\n        if (this.keyword)\n          params = {\n            query : `where(\"${this.searchBy}\" contains \"${this.keyword}\")`,\n          };\n\n        api(this.api, params)\n          .then(r => this.result = r.data || []);\n      },\n      debounceFilterAsync () {\n        if (this.timer)\n          clearTimeout(this.timer);\n\n        this.timer = setTimeout(() => {\n          this.filterAsync();\n        }, 300);\n      },\n    },\n    watch   : {\n      keyword (n, o) {\n        if (this.api)\n          this.debounceFilterAsync();\n        else\n          this.filter();\n      },\n    },\n  };\n</script>\n\n<style scoped>\n  .dropdown {\n    display: block;\n    position: relative;\n  }\n\n  .dropdown input {\n    width: 100%;\n  }\n\n  .list {\n    background: #fff;\n    border: 1px solid rgba(0, 0, 0, .2);\n  }\n\n  .option {\n    padding: .2rem .5rem;\n  }\n\n  .option:hover {\n    background: rgba(0, 40, 180, .2);\n  }\n\n  .list {\n    position: absolute;\n    /*top: 33px;*/\n    z-index: 100;\n    width: 100%;\n  }\n</style>","<template>\n  <div>\n    <h1>ååç®¡ç</h1>\n    <div>\n      <el-button-group>\n        <el-button @click=\"ui.formVisible = !ui.formVisible\">\n          <span v-if=\"ui.formVisible\">åæ¶</span>\n          <span v-else>åå»º</span>\n        </el-button>\n      </el-button-group>\n    </div>\n    <div v-if=\"ui.formVisible\">\n      <h2>æ·»å /ä¿®æ¹</h2>\n      <form @submit.prevent=\"createOrUpdate\">\n        <label>\n          <span class=\"title\">æ é¢</span>\n          <input class=\"el-input__inner\" type=\"text\" v-model=\"form.title\">\n          <span class=\"error-list\">\n            <span :key=\"e\" v-if=\"invalid\" v-for=\"(invalid, e) in errors.title\" class=\"error\">{{rules.title[e].msg}}</span>\n          </span>\n        </label>\n        <label>\n          <span class=\"title\">åç±»</span>\n          <Dropdown api=\"cat/read\"\n                    searchBy=\"name\"\n                    displayBy=\"name\"\n                    select=\"form.cat_id\"\n                    className=\"el-input__inner\"\n                    :onSelect=\"makeSelect('cat_id')\"\n          />\n          <span class=\"error-list\">\n            <span :key=\"e\" v-if=\"invalid\" v-for=\"(invalid, e) in errors.cat_id\" class=\"error\">{{rules.cat_id[e].msg}}</span>\n          </span>\n        </label>\n        <label>\n          <span class=\"title\">åç</span>\n          <Dropdown api=\"brand/read\"\n                    searchBy=\"name\"\n                    displayBy=\"name\"\n                    select=\"form.brand_id\"\n                    className=\"el-input__inner\"\n                    :onSelect=\"makeSelect('brand_id')\"\n          />\n          <span class=\"error-list\">\n            <span :key=\"e\" v-if=\"invalid\" v-for=\"(invalid, e) in errors.brand_id\" class=\"error\">{{rules.brand_id[e].msg}}</span>\n          </span>\n        </label>\n        <label>\n          <span class=\"title\">ä»·æ ¼</span>\n          <input class=\"el-input__inner\" type=\"number\" v-model=\"form.price\">\n          <span class=\"error-list\">\n            <span :key=\"e\" v-if=\"invalid\" v-for=\"(invalid, e) in errors.price\" class=\"error\">{{rules.price[e].msg}}</span>\n          </span>\n        </label>\n        <label>\n          <span class=\"title\">è¿è´¹</span>\n          <input class=\"el-input__inner\" type=\"number\" v-model=\"form.shipping_fee\">\n          <span class=\"error-list\">\n            <span :key=\"e\" v-if=\"invalid\" v-for=\"(invalid, e) in errors.shipping_fee\"\n                  class=\"error\">{{rules.shipping_fee[e].msg}}</span>\n          </span>\n        </label>\n\n        <label>\n          <span class=\"title\">åºå­</span>\n          <input class=\"el-input__inner\" type=\"number\" v-model=\"form.total\">\n          <span class=\"error-list\">\n            <span :key=\"e\" v-if=\"invalid\" v-for=\"(invalid, e) in errors.total\" class=\"error\">{{rules.total[e].msg}}</span>\n          </span>\n        </label>\n\n        <label>\n          <span class=\"title\">éé</span>\n          <input class=\"el-input__inner\" type=\"number\" v-model=\"form.sales\">\n          <span class=\"error-list\">\n            <span :key=\"e\" v-if=\"invalid\" v-for=\"(invalid, e) in errors.sales\" class=\"error\">{{rules.sales[e].msg}}</span>\n          </span>\n        </label>\n\n        <label>\n          <span class=\"title\">ææ£</span>\n          <input class=\"el-input__inner\"\n                 step=\"0.01\"\n                 type=\"number\"\n                 v-model=\"form.discount\">\n          <span class=\"error-list\">\n            <span :key=\"e\" v-if=\"invalid\" v-for=\"(invalid, e) in errors.discount\" class=\"error\">{{rules.discount[e].msg}}</span>\n          </span>\n        </label>\n\n        <label>\n          <span class=\"title\">è´§å°ä»æ¬¾</span>\n          <el-switch\n                  v-model=\"form.cod\"\n                  active-color=\"#13ce66\"\n                  inactive-color=\"#aaa\">\n          </el-switch>\n        </label>\n\n        <label>\n          <span class=\"title\">ç­å</span>\n          <el-switch\n                  v-model=\"form.is_hot\"\n                  active-color=\"#13ce66\"\n                  inactive-color=\"#aaa\">\n          </el-switch>\n        </label>\n\n        <label>\n          <span class=\"title\">æ°å</span>\n          <el-switch\n                  v-model=\"form.is_new\"\n                  active-color=\"#13ce66\"\n                  inactive-color=\"#aaa\">\n          </el-switch>\n        </label>\n\n        <label>\n          <span class=\"title\">è½®æ­å±ç¤º</span>\n          <el-switch\n                  v-model=\"form.is_carousel\"\n                  active-color=\"#13ce66\"\n                  inactive-color=\"#aaa\">\n          </el-switch>\n        </label>\n\n        <div v-if=\"form.is_carousel\">\n          <label>\n            <span class=\"title\">è½®æ­å¾ç</span>\n            <Uploader @uploadSuccess=\"carouselUploaded\" :autoUpload=\"true\"/>\n          </label>\n          <img v-if=\"form.carousel\" :src=\"fileUrl(form.carousel)\" :alt=\"img.name\">\n        </div>\n\n        <label>\n          <span class=\"title\">ç¬æå±æ§</span>\n          <!--<button type=\"button\" class=\"el-button el-button&#45;&#45;default\">+</button>-->\n          <!-- èªå®ä¹æ·»å çå±æ§  -->\n          <div class=\"row\">\n            <input v-model=\"propForm.key\" class=\"even\" type=\"text\" placeholder=\"åç§°\">\n            <input v-model=\"propForm.value\" class=\"even\" type=\"text\" placeholder=\"å¯éçå¼ï¼è¯·ç¨|éå¼\">\n            <button @click=\"addProp\" type=\"button\">å®æ</button>\n          </div>\n          <!-- å½ç¹å»å®ææé®å å°±æé®å¼å¯¹ æ¸²æå°é¡µé¢ä¸ -->\n          <div :key=\"k\" v-for=\"(v, k) in form.prop\" class=\"row\">\n            <span>{{k}}</span>:\n            <span>{{v}}</span>\n            <!--<input v-model=\"v\" class=\"even\" type=\"text\" placeholder=\"å¯éçå¼ï¼è¯·ç¨|éå¼\">-->\n            <button @click=\"removeProp(k)\" type=\"button\">-</button>\n            <button @click=\"fillPropForm(k, v)\" type=\"button\">ç¼è¾</button>\n          </div>\n          <span class=\"error-list\">\n            <span :key=\"e\" v-if=\"invalid\" v-for=\"(invalid, e) in errors.total\" class=\"error\">{{rules.total[e].msg}}</span>\n          </span>\n        </label>\n\n        <div>\n          <label>\n            <span class=\"title\">ä¸»å¾</span>\n            <Uploader @uploadSuccess=\"singleCoverUploaded\" :autoUpload=\"true\"/> <!-- æå¥ä¸»å¾çç»ä»¶  -->\n          </label>\n          <el-row>\n            <el-col :key=\"img\" class=\"thumbnail\" :span=\"6\" v-for=\"img in form.main_img\">\n              <img :src=\"fileUrl(img)\" :alt=\"img.name\">\n              <div>{{img._original_name}}</div>\n            </el-col>\n          </el-row>\n        </div>\n\n\n        <div>\n          <div class=\"title\">è¯¦ææè¿°</div>\n          <button type=\"button\" @click=\"inertDesc('text')\">æå¥æå­</button>\n          <button type=\"button\" @click=\"inertDesc('image')\">æå¥å¾ç</button>\n          <div>\n            <div :key=\"i\" class=\"segment\" v-for=\"(it, i) in form.detail\">\n              <button type=\"button\" @click=\"removeDesc(i)\">å é¤</button>\n              <div v-if=\"it.type === 'text'\" class=\"text\">\n                <el-input type=\"textarea\" v-model=\"it.value\"/>\n              </div>\n              <div v-else class=\"image\">\n                <Uploader @uploadSuccess=\"singleDescImageUploaded($event, i)\" :autoUpload=\"true\"/>\n                <div v-if=\"it.value\">\n                  <img :src=\"fileUrl(it.value)\" alt=\"\">\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <label>\n          <button class=\"el-button el-button--primary\" type=\"submit\">æäº¤</button>\n          <button class=\"el-button el-button--text\" @click=\"ui.formVisible=false\">åæ¶</button>\n        </label>\n      </form>\n    </div>\n    <div>\n      <h2>åè¡¨</h2>\n      <p>æ»æ°ï¼{{total}}</p>\n      <el-table :data=\"list\"\n                stripe\n                style=\"width: 100%\">\n        <el-table-column\n                prop=\"title\"\n                label=\"æ é¢\"\n                width=\"180\">\n        </el-table-column>\n        <el-table-column\n                label=\"ä¸»å¾\"\n                width=\"200\">\n          <template slot-scope=\"scope\">\n            <div :key=\"img\" class=\"thumbnail\" v-for=\"img in scope.row.main_img\">\n              <img :src=\"fileUrl(img)\" :alt=\"img.name\">\n              <div>{{img._original_name}}</div>\n            </div>\n          </template>\n        </el-table-column>\n        <el-table-column\n                prop=\"$cat.name\"\n                label=\"åç±»\"\n                width=\"180\">\n        </el-table-column>\n        <el-table-column\n                prop=\"$brand.name\"\n                label=\"åç\"\n                width=\"180\">\n        </el-table-column>\n        <el-table-column\n                prop=\"price\"\n                label=\"ä»·æ ¼\"\n                width=\"180\">\n        </el-table-column>\n        <el-table-column\n                prop=\"shipping_fee\"\n                label=\"è¿è´¹\"\n                width=\"180\">\n        </el-table-column>\n        <el-table-column\n                prop=\"total\"\n                label=\"åºå­\"\n                width=\"180\">\n        </el-table-column>\n        <el-table-column\n                fixed=\"right\"\n                label=\"æä½\"\n                width=\"100\">\n          <template slot-scope=\"scope\">\n            <el-button @click=\"fill(scope.row)\" type=\"text\" size=\"small\">æ´æ°</el-button>\n            <el-button @click=\"remove(scope.row.id)\" type=\"text\" size=\"small\">å é¤</el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n      <div class=\"text-center\">\n        <el-pagination\n                :page-size=\"readParam.limit\"\n                :current-page=\"readParam.page\"\n                layout=\"prev, pager, next\"\n                :total=\"total\"\n                @current-change=\"flip\"\n        >\n        </el-pagination>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n  import { call as valee } from '../../lib/valee';\n  import Dropdown          from '../../components/Dropdown';\n  import admin             from '../../mixin/admin';\n  import Uploader          from '../../components/Uploader';\n  import { fileUrl }       from '../../lib/helper';\n\n\n  export default {\n    components : { Uploader, Dropdown },\n    mixins     : [ admin ],\n    data () {\n      return {\n        model     : 'product',\n        propForm  : { key : '', value : '' }, // ç¬æå±æ§è¡¨åæ°æ®\n        readParam : {\n          with : [\n            'belongs_to:cat',\n            'belongs_to:brand',\n            // {\n            //   model       : 'cat',\n            //   relation    : 'belongs_to',\n            //   foreign_key : 'parent_id',\n            // },\n          ],\n        },\n        rules     : {\n          title        : {\n            required : {\n              msg : 'æ é¢ä¸ºå¿å¡«é¡¹',\n            },\n          },\n          cat_id       : {\n            required : {\n              msg : 'åç±»ä¸ºå¿å¡«é¡¹',\n            },\n          },\n          brand_id     : {\n            required : {\n              msg : 'åçä¸ºå¿å¡«é¡¹',\n            },\n          },\n          price        : {\n            min : {\n              params : [ 0 ],\n              msg    : 'ä»·æ ¼ä¸å¯å°äº0',\n            },\n          },\n          shipping_fee : {\n            min : {\n              params : [ 0 ],\n              msg    : 'ä»·æ ¼ä¸å¯å°äº0',\n            },\n          },\n          total        : {\n            min : {\n              params : [ 0 ],\n              msg    : 'ä»·æ ¼ä¸å¯å°äº0',\n            },\n          },\n\n          // parent_id : {\n          //   required : {\n          //     msg : 'ç¶çº§åç±»ä¸ºå¿å¡«é¡¹',\n          //   },\n          // },\n        },\n      };\n    },\n    methods    : {\n      fileUrl,\n      /**\n       * æ·»å ç¬æå±æ§\n       */\n      addProp () {\n        let pf    = this.propForm;\n        let f     = this.form;\n        let key   = pf.key;\n        let value = pf.value;\n        // å¦ææ²¡å¡« å°±ç´æ¥è¿å å¦å undefind å°±ä¼ç»æ·»å è¿å»äº\n        if (!key || !value)\n          return;\n        // å¦æä¸å¼å§æ²¡æ this.form.prop å°±åå§ååå»ºä¸ä¸ª å¦åå°±å¾éæ·»å   this.form:{ prop:{ this.propForm.key: this.propForm.value } }\n        // Vue ä¸åè®¸å¨å·²ç»åå»ºçå®ä¾ä¸å¨ææ·»å æ°çæ ¹çº§ååºå¼å±æ§ (root-level reactive property)ãç¶èå®å¯ä»¥ä½¿ç¨ Vue.set(object, key, value) æ¹æ³å°ååºå±æ§æ·»å å°åµå¥çå¯¹è±¡ä¸\n        if (!f.prop)\n          this.$set(f, 'prop', {});\n\n        this.$set(f.prop, pf.key, pf.value);\n\n        this.propForm = {};\n      },\n      // å é¤èªå®ä¹çä¸ªæ§å±æ§\n      removeProp (key) {\n        this.$delete(this.form.prop, key);\n      },\n      // æ´æ°èªå®ä¹çä¸ªæ§å±æ§  å¿é¡» $set æè½å¨ææ¸²æè§å¾\n      fillPropForm (key, value) {\n        this.$set(this.propForm, 'key', key);\n        this.$set(this.propForm, 'value', value);\n      },\n      // è½®æ­å¾æ§è¡å½æ°\n      carouselUploaded (data) {\n        this.form.carousel_img = data;\n        // this.$set(this.form, 'carouse_img', data);\n      },\n      // æ·»å ä¸»å¾ é¦å form æ²¡æ main_img å°±ååå§åä¸ä¸ª ç¶åç»ä»æ·»å \n      singleCoverUploaded (data) {\n        console.log(data);\n        if (!this.form.main_img)\n          this.$set(this.form, 'main_img', []);\n\n        this.form.main_img.push(data);\n      },\n      \n      singleDescImageUploaded (image, index) {\n        this.updateDesc(index, image);\n      },\n      // æ·»å è¯¦ææè¿° é¦å form æ²¡æ detail å°±ååå§åä¸ä¸ª ç¶åç»ä»æ·»å  è¿ä¸ªå½æ°åªè´è´£å¾éé¢æ¨ä¸é¡¹æ°æ® å¹¶ä¸å¨ä¹æ¯æå­è¿æ¯å¾ç\n      inertDesc (type) {\n        if (!this.form.detail)\n          this.$set(this.form, 'detail', []);\n\n        this.form.detail.push({ type });\n      },\n      // æäº inertDesc å½æ°ä¹åæè½æ´æ° \n      updateDesc (index, value) {\n        this.$set(this.form.detail[ index ], 'value', value);\n        console.log(this.form.detail);\n      },\n      removeDesc (index) {\n        this.form.detail.splice(index, 1);\n      },\n    },\n  };\n</script>\n\n<style scoped>\n  .thumbnail {\n    -webkit-box-shadow: 0 0 3px rgba(0, 0, 0, .2);-moz-box-shadow: 0 0 3px rgba(0, 0, 0, .2);box-shadow: 0 0 3px rgba(0, 0, 0, .2);\n  }\n\n  table .thumbnail {\n    text-align: center;\n    display: inline-block;\n    max-width: 50px;\n    font-size: 70%;\n  }\n\n  .segment {\n    padding: .5em;\n    border: 2px solid #ccc;\n    margin-bottom: .5em;\n  }\n</style>"]}