{"version":3,"sources":["webpack:///src/css/global.css","app.282dc943.css","webpack:///src/components/src/components/Cart.vue","webpack:///src/components/src/components/GolbalNav.vue","webpack:///src/components/src/components/RegularNav.vue","webpack:///src/components/src/components/ProductCard.vue","webpack:///src/page/src/page/Home.vue","webpack:///src/page/src/page/Product.vue","webpack:///src/components/search/src/components/search/FilterProp.vue","webpack:///src/page/src/page/Search.vue","webpack:///src/page/src/page/My.vue","webpack:///src/page/src/page/Order.vue","webpack:///src/css/admin.css","webpack:///src/components/src/components/Dropdown.vue","webpack:///src/page/admin/src/page/admin/Product.vue"],"names":[],"mappings":"AAAA,EACE,6BAAA,CAA2D,qBCC7D,CDEA,MACE,sBAAA,CACA,UAAA,CACA,cCCF,CDEA,EACE,oBCCF,CDEA,IACE,aAAA,CACA,UCCF,CDEA,SACE,QAAA,CACA,QAAA,CACA,SCCF,CDEA,2BAEE,eAAA,CACA,gBAAA,CACA,iBAAA,CACA,iBAAA,CACA,kBCCF,CDEA,gBACE,eCCF,CDEA,WAAa,eAAgB,CAC7B,YAAc,gBAAiB,CAC/B,aAAe,iBAAkB,CAEjC,QACE,oBAAA,CACA,iBAAA,CACA,UAAA,CACA,oBAAA,CACA,cCCF,CDEA,cACE,UAAA,CACA,yBCCF,CDEA,yBACE,kBCCF,CDEA,MACE,aCCF,CDEA,QACE,oBAAA,CACA,gBAAA,CACA,kBCCF,CDEA,sBACE,UCCF,CDEA,MACE,yBAAA,CACA,YCCF,CDEA,KACE,UAAA,CACA,eCCF,CDEA,YACE,eCCF,CDEA,WACE,aAAA,CACA,aCCF,CDEA,OACE,eCCF,CDEA,YACE,oBAAA,CACA,aAAA,CACA,cCCF,CDEA,OACE,UCCF,CDEA,YACE,aAAA,CACA,aCCF,CCPA,oBACA,iBDUA,CCPA,uBACA,cAAA,CACA,eAAA,CACA,eAAA,CACA,UAAA,CACA,UDSA,CCNA,wCACA,eDQA,CEtEA,sBACA,yBF0EA,CEvEA,8BACA,YFyEA,CGhFA,uBACA,cAAA,CACA,eAAA,CACA,kBHoFA,CGjFA,yBACA,iBAAA,CACA,QHmFA,CIzGA,6BACA,SJ6GA,CKzEA,uCACA,aAAA,CACA,cAAA,CACA,WAAA,CACA,iBAAA,CACA,QL6EA,CK1EA,kDACA,wBL4EA,CKzEA,mDACA,wBL2EA,CKxEA,2BACA,cL0EA,CMqGA,uCACA,aAAA,CACA,cAAA,CACA,WAAA,CACA,iBAAA,CACA,QNjGA,CMoGA,kDACA,wBNlGA,CMqGA,mDACA,wBNnGA,CMsGA,uCACA,aAAA,CACA,gBNpGA,CMuGA,oCACA,cNrGA,CMwGA,wBACA,gBNtGA,CMyGA,kDAEA,kBNvGA,CM0GA,8BACA,oBAAA,CACA,iBAAA,CACA,iBAAA,CACA,+BAAA,CACA,aAAA,CACA,cNxGA,CM+GA,4EACA,iBN1GA,CM6GA,wBACA,+BAAA,CACA,WAAA,CACA,aAAA,CACA,UN3GA,CM8GA,gCACA,kBN5GA,CM+GA,+BACA,cAAA,CACA,aN7GA,CMgHA,8CACA,SN9GA,CMiHA,6CACA,SN/GA,CMkHA,2BACA,aAAA,CACA,UNhHA,COnLA,gEAEA,oBAAA,CACA,cAAA,CACA,WPuLA,COpLA,wCACA,kBAAA,CACA,UPsLA,CQoEA,yBACA,cAAA,CACA,iBRhEA,CQmEA,yBACA,URjEA,CQoEA,0BACA,kBRlEA,CQqEA,iCACA,+BAAA,CACA,qBRnEA,CQsEA,4CACA,uBRpEA,CQuEA,+BACA,aAAA,CACA,URrEA,CQyEA,uBACA,oBAAA,CACA,qBRvEA,CQ0EA,6BACA,iBRxEA,CQ2EA,+BACA,cRzEA,CQ4EA,qCACA,UR1EA,CQ8EA,8BACA,iBR5EA,CSjPA,kBACA,YTqPA,CUvIA,+BACA,WV2IA,CUxIA,gCACA,aV0IA,CUvIA,yBACA,eVyIA,CW1SA,YACE,eAAA,CACA,aX6SF,CY1MA,2BACA,aAAA,CACA,iBZ6MA,CY1MA,iCACA,UZ4MA,CYzMA,uBACA,eAAA,CACA,+BZ2MA,CYxMA,yBACA,mBZ0MA,CYvMA,+BACA,4BZyMA,CYtMA,uBACA,iBAAA,CAEA,WAAA,CACA,UZwMA,Ca4EA,4BACA,yCAAA,CAAA,iCbxEA,Ca2EA,kCACA,iBAAA,CACA,oBAAA,CACA,cAAA,CACA,abzEA,Ca4EA,0BACA,YAAA,CACA,qBAAA,CACA,kBb1EA","file":"app.282dc943.css","sourcesContent":["* {\n  -webkit-box-sizing: border-box;-moz-box-sizing: border-box;box-sizing: border-box;\n}\n\n:root {\n  font-family: sans-serif;\n  color: #333;\n  font-size: 12px;\n}\n\na {\n  text-decoration: none;\n}\n\nimg {\n  display: block;\n  width: 100%;\n}\n\nfieldset {\n  border: 0;\n  margin: 0;\n  padding: 0;\n}\n\n.form-container,\n.container {\n  max-width: 800px;\n  margin-left: auto;\n  margin-right: auto;\n  padding-left: .5em;\n  padding-right: .5em;\n}\n\n.form-container {\n  max-width: 400px;\n}\n\n.text-left { text-align: left; }\n.text-right { text-align: right; }\n.text-center { text-align: center; }\n\n.anchor {\n  display: inline-block;\n  padding: .3em .5em;\n  color: #555;\n  text-decoration: none;\n  cursor: pointer;\n}\n\n.anchor:hover {\n  color: #000;\n  text-decoration: underline;\n}\n\n.vertical-gutter .el-col {\n  margin-bottom: .5em;\n}\n\n.pair {\n  margin: .2em 0;\n}\n\n.pair > * {\n  display: inline-block;\n  margin: 0 1em 0 0;\n  vertical-align: top;\n}\n\n.pair > *:nth-child(odd) {\n  opacity: .6;\n}\n\n.well {\n  background: rgba(0,0,0,.1);\n  padding: .5em;\n}\n\n.hot {\n  color: #e10;\n  font-weight: bold;\n}\n\n.cny:before {\n  content: '￥';\n}\n\nform label {\n  display: block;\n  margin: .5em 0;\n}\n\n.title {\n  font-weight: bold;\n}\n\nform .title {\n  display: inline-block;\n  margin: .5em 0;\n  font-size: 110%;\n}\n\n.error {\n  color: #e10;\n}\n\nform .error {\n  display: block;\n  margin: .5em 0;\n}","* {\n  -webkit-box-sizing: border-box;box-sizing: border-box;\n}\n\n:root {\n  font-family: sans-serif;\n  color: #333;\n  font-size: 12px;\n}\n\na {\n  text-decoration: none;\n}\n\nimg {\n  display: block;\n  width: 100%;\n}\n\nfieldset {\n  border: 0;\n  margin: 0;\n  padding: 0;\n}\n\n.form-container,\n.container {\n  max-width: 800px;\n  margin-left: auto;\n  margin-right: auto;\n  padding-left: .5em;\n  padding-right: .5em;\n}\n\n.form-container {\n  max-width: 400px;\n}\n\n.text-left { text-align: left; }\n.text-right { text-align: right; }\n.text-center { text-align: center; }\n\n.anchor {\n  display: inline-block;\n  padding: .3em .5em;\n  color: #555;\n  text-decoration: none;\n  cursor: pointer;\n}\n\n.anchor:hover {\n  color: #000;\n  text-decoration: underline;\n}\n\n.vertical-gutter .el-col {\n  margin-bottom: .5em;\n}\n\n.pair {\n  margin: .2em 0;\n}\n\n.pair > * {\n  display: inline-block;\n  margin: 0 1em 0 0;\n  vertical-align: top;\n}\n\n.pair > *:nth-child(odd) {\n  opacity: .6;\n}\n\n.well {\n  background: rgba(0,0,0,.1);\n  padding: .5em;\n}\n\n.hot {\n  color: #e10;\n  font-weight: bold;\n}\n\n.cny:before {\n  content: '\\FFE5';\n}\n\nform label {\n  display: block;\n  margin: .5em 0;\n}\n\n.title {\n  font-weight: bold;\n}\n\nform .title {\n  display: inline-block;\n  margin: .5em 0;\n  font-size: 110%;\n}\n\n.error {\n  color: #e10;\n}\n\nform .error {\n  display: block;\n  margin: .5em 0;\n}\n\nh2[data-v-74a81a26] {\n  text-align: center;\n}\n.cart[data-v-74a81a26] {\n  position: fixed;\n  max-width: 400px;\n  min-width: 200px;\n  z-index: 10;\n  right: 15px;\n}\n.el-input-number--mini[data-v-74a81a26] {\n  max-width: 100px;\n}\n\n\n.nav[data-v-586900af] {\n  background: rgba(0, 0, 0, .1);\n}\n.nav .anchor[data-v-586900af] {\n  padding: .6em;\n}\n\n\n.logo[data-v-8e3380c4] {\n  max-width: 10em;\n  padding-top: 1em;\n  padding-bottom: 1em;\n}\n.search[data-v-8e3380c4] {\n  position: relative;\n  top: 15px;\n}\n\n\n.product-card .el-card__body {\n  padding: 0;\n}\n\n\n.el-carousel__item h3[data-v-121c3a2c] {\n  color: #475669;\n  font-size: 14px;\n  opacity: 0.75;\n  line-height: 200px;\n  margin: 0;\n}\n.el-carousel__item[data-v-121c3a2c]:nth-child(2n) {\n  background-color: #99a9bf;\n}\n.el-carousel__item[data-v-121c3a2c]:nth-child(2n+1) {\n  background-color: #d3dce6;\n}\n.carousel[data-v-121c3a2c] {\n  margin-top: 1em;\n}\n\n\n.el-carousel__item h3[data-v-72ef49d6] {\n  color: #475669;\n  font-size: 18px;\n  opacity: 0.75;\n  line-height: 300px;\n  margin: 0;\n}\n.el-carousel__item[data-v-72ef49d6]:nth-child(2n) {\n  background-color: #99a9bf;\n}\n.el-carousel__item[data-v-72ef49d6]:nth-child(2n+1) {\n  background-color: #d3dce6;\n}\n.pair > *[data-v-72ef49d6]:nth-child(odd) {\n  font-size: 80%;\n  margin-right: 3em;\n}\n.overview .hot.cny[data-v-72ef49d6] {\n  font-size: 120%;\n}\n.title[data-v-72ef49d6] {\n  font-size: 1.1rem;\n}\n.detail > *[data-v-72ef49d6],\n.text > *[data-v-72ef49d6] {\n  margin-bottom: .8em;\n}\n.pill-option[data-v-72ef49d6] {\n  display: inline-block;\n  margin-right: .5em;\n  padding: .3em .5em;\n  border: 2px solid rgba(0, 0, 0, .2);\n  font-size: 80%;\n  cursor: default;\n}\n.pill-option.active[data-v-72ef49d6] {\n  border-color: #e10;\n}\n.pill-option.selected[data-v-72ef49d6] {\n  border-color: #e10;\n}\n.props[data-v-72ef49d6] {\n  border: 1px solid rgba(0, 0, 0, .1);\n  padding: 1em;\n  font-size: 80%;\n  color: #666;\n}\n.props .el-col[data-v-72ef49d6] {\n  margin-bottom: .3em;\n}\n.props .pair > *[data-v-72ef49d6] {\n  margin-right: 0;\n  margin-left: 0;\n}\n.props .pair > *[data-v-72ef49d6]:nth-child(odd) {\n  width: 40%;\n}\n.props .pair > *[data-v-72ef49d6]:nth-child(even) {\n  width: 60%;\n}\n.main_ing[data-v-72ef49d6] {\n  display: block;\n  width: 100%;\n}\n\n\n.filter .type[data-v-72beae5c],\n.filter .option[data-v-72beae5c] {\n  display: inline-block;\n  cursor: pointer;\n  padding: 1em;\n}\n.filter .option.active[data-v-72beae5c] {\n  background: #409EFF;\n  color: #fff;\n}\n\n\n.search[data-v-2b6a7144] {\n  margin-top: 1em;\n  margin-bottom: 1em;\n}\n.filter[data-v-2b6a7144] {\n  color: #666;\n}\n.filter > *[data-v-2b6a7144] {\n  margin-bottom: .5em;\n}\n.filter .table > *[data-v-2b6a7144] {\n  border: 1px solid rgba(0, 0, 0, .1);\n  border-bottom-width: 0;\n}\n.filter .table > *[data-v-2b6a7144]:last-child {\n  border-bottom-width: 1px;\n}\n.filter .type[data-v-2b6a7144] {\n  font-size: 90%;\n  opacity: .8;\n}\n.bar > *[data-v-2b6a7144] {\n  display: inline-block;\n  vertical-align: middle;\n}\n.bar .group[data-v-2b6a7144] {\n  margin-right: .5em;\n}\n#price-filter[data-v-2b6a7144] {\n  max-width: 14em;\n}\n#price-filter input[data-v-2b6a7144] {\n  width: 100%;\n}\n.el-checkbox[data-v-2b6a7144] {\n  margin-right: .5em;\n}\n\n\n.side-focus:focus {\n  color: tomato;\n}\n\n\n.card-content[data-v-1e2e56e2] {\n  padding: 1em;\n}\n.detail .title[data-v-1e2e56e2] {\n  margin: .5em 0;\n}\n.qrcode[data-v-1e2e56e2] {\n  max-width: 200px;\n}\n\nform .title {\n  font-weight: bold;\n  display: block;\n}\n\n.dropdown[data-v-6ff118cf] {\n  display: block;\n  position: relative;\n}\n.dropdown input[data-v-6ff118cf] {\n  width: 100%;\n}\n.list[data-v-6ff118cf] {\n  background: #fff;\n  border: 1px solid rgba(0, 0, 0, .2);\n}\n.option[data-v-6ff118cf] {\n  padding: .2rem .5rem;\n}\n.option[data-v-6ff118cf]:hover {\n  background: rgba(0, 40, 180, .2);\n}\n.list[data-v-6ff118cf] {\n  position: absolute;\n  /*top: 33px;*/\n  z-index: 100;\n  width: 100%;\n}\n\n\n.thumbnail[data-v-7634f0c9] {\n  -webkit-box-shadow: 0 0 3px rgba(0, 0, 0, .2);box-shadow: 0 0 3px rgba(0, 0, 0, .2);\n}\ntable .thumbnail[data-v-7634f0c9] {\n  text-align: center;\n  display: inline-block;\n  max-width: 50px;\n  font-size: 70%;\n}\n.segment[data-v-7634f0c9] {\n  padding: .5em;\n  border: 2px solid #ccc;\n  margin-bottom: .5em;\n}\n\n\n/*# sourceMappingURL=app.282dc943.css.map*/","<template>\n  <div class=\"cart\">\n    <el-card>\n      <div slot=\"header\" class=\"clearfix\">\n        <span>我的购物车</span>\n        <span class=\"anchor\" @click=\"$emit('close')\" style=\"float: right;\">关闭</span>\n      </div>\n      <div v-if=\"Object.keys(listCart).length < 1\">暂无内容</div>\n      <el-row :key=\"k\" v-for=\"(v, k) in listCart\">\n        <el-col :span=\"4\">\n          <ProductThumb style=\"padding: .2em;\" :data=\"v\"/>\n        </el-col>\n        <el-col :span=\"10\">{{v.product_snapshot.title}}</el-col>\n        <el-col class=\"cny hot text-center\" :span=\"4\">{{v.product_snapshot.price}}</el-col>\n        <el-col :span=\"6\">\n          <div class=\"el-input-number el-input-number--mini\">\n            <span \n              @click=\"cartService.change(v.product_snapshot.id, -1)\" \n              role=\"button\"\n              class=\"el-input-number__decrease\"\n            >\n              <i class=\"el-icon-minus\"></i>\n            </span>\n            <span \n              @click=\"cartService.change(v.product_snapshot.id, +1)\" \n              role=\"button\"\n              class=\"el-input-number__increase\"\n            >\n              <i class=\"el-icon-plus\"></i>\n            </span>\n            <div class=\"el-input el-input--mini\">\n              <input type=\"text\"\n                     v-model=\"v.count\"\n                     autocomplete=\"off\"\n                     aria-label=\"描述文字\"\n                     max=\"Infinity\"\n                     min=\"1\"\n                     class=\"el-input__inner\"\n                     role=\"spinbutton\"\n                     aria-valuemax=\"10\"\n                     aria-valuemin=\"1\"\n                     aria-valuenow=\"4\"\n                     aria-disabled=\"undefined\">\n            </div>\n          </div>\n        </el-col>\n      </el-row>\n      <p>\n        总价：<span class=\"hot cny\">{{orderSum}}</span>\n      </p>\n      <p>\n        <el-button @click=\"createOrder\" type=\"primary\">付款</el-button>\n      </p>\n    </el-card>\n  </div>\n</template>\n\n<script>\n  import cartService     from '../service/cart';\n  import ProductThumb    from '../components/ProductThumb';\n  import session         from '../lib/session';\n  import { createOrder, orderSum } from '../lib/order';\n  import { obj2Arr }     from '../lib/helper';\n\n  export default {\n    components : { ProductThumb },\n    data () {\n      return {\n        listCart : {},\n        cartService,\n      };\n    },\n    computed: {\n      listCartArr() {\n        return obj2Arr(this.listCart);\n      },\n      orderSum() {\n        return orderSum(this.listCartArr);\n      }\n    },\n    mounted () {\n      console.log(cartService.get());\n      // 一开始 手动调一次数据\n      // this.cart_list = cartService.get();\n\n      // 购物车数据发生改变 ，让回调传回来的新数据重新覆盖 cart_list 里的数据\n      cartService.onChange(localCart => this.listCart = localCart);\n    },\n    methods    : {\n      createOrder () {\n        createOrder(this.listCartArr, session.user('id'))   //  session.user('id') 谁创建的订单\n          .then(r => {\n            this.$router.push(`/my/order/${r.data.id}`);\n            cartService.clear();\n            this.$emit('close')\n          });\n      },\n    },\n  };\n</script>\n\n<style scoped>\n  h2 {\n    text-align: center;\n  }\n\n  .cart {\n    position: fixed;\n    max-width: 400px;\n    min-width: 200px;\n    z-index: 10;\n    right: 15px;\n  }\n\n  .el-input-number--mini {\n    max-width: 100px;\n  }\n</style>\n\n","<template>\n  <div class=\"nav\">\n    <div class=\"container\">\n      <el-row>\n        <el-col :span=\"12\">\n          <router-link class=\"anchor\" to=\"/\">首页</router-link>\n          <a class=\"anchor\" href=\"#\">item</a>\n        </el-col>\n        <el-col class=\"text-right\" :span=\"12\">\n          <span @click=\"ui.showCart = !ui.showCart\" class=\"anchor\">购物车 <span>({{cartCount}})</span></span>\n          <!--<a class=\"anchor\" href=\"#\">item</a>-->\n          <span v-if=\"session.loggedIn()\">\n            <router-link class=\"anchor\"\n                         to=\"/my/setting\">{{session.user('nickname') || session.user('mail') || session.user('phone') | cut(6) }}</router-link>\n            <span @click=\"session.logout()\" class=\"anchor\">登出</span>\n          </span>\n          <span v-else>\n            <router-link class=\"anchor\" to=\"/login\">登录</router-link>\n            <router-link class=\"anchor\" to=\"/signup\">注册</router-link>\n          </span>\n        </el-col>\n      </el-row>\n    </div>\n    <Cart @close=\"() => {ui.showCart = false}\" v-show=\"ui.showCart\"/>\n  </div>\n</template>\n\n<script>\n  import session     from '../lib/session';\n  import Cart        from './Cart';\n  import cartService from '../service/cart';\n\n  export default {\n    components : { Cart },\n    mounted () {\n      // 当购物车内发生改变，显示多少种货\n      cartService.onChange(_ => {\n        this.cartCount = cartService.productCount();\n      });\n    },\n    data () {\n      return {\n        cartCount : 0,\n        ui        : {\n          showCart : false,\n        },\n        session,\n      };\n    },\n  };\n</script>\n\n<style scoped>\n  .nav {\n    background: rgba(0, 0, 0, .1);\n  }\n\n  .nav .anchor {\n    padding: .6em;\n  }\n</style>","<template>\n  <!-- 此组件只负责拿取到搜索的关键字 并跳转到搜索页 同时携带这关键字传参 -->\n  <div class=\"nav\">\n    <div class=\"container\">\n      <el-row :gutter=\"10\">\n        <el-col :span=\"6\">\n          <router-link to=\"/\">\n            <div class=\"logo\">\n              <img src=\"../img/logo@2x.png\" alt=\"Logo\">\n            </div>\n          </router-link>\n        </el-col>\n        <el-col class=\"text-right\" :span=\"12\">\n          <form @submit.prevent=\"toSearch\" class=\"search\">\n            <el-input v-model=\"formSearch.keyword\" suffix-icon=\"el-icon-search\"></el-input>\n          </form>\n        </el-col>\n        <el-col :span=\"6\">\n          <div class=\"logo\">\n          </div>\n        </el-col>\n      </el-row>\n    </div>\n  </div>\n\n</template>\n\n<script>\n  import logo from '../img/logo.png';\n\n  export default {\n    data () {\n      return {\n        formSearch : {},\n        logo,\n      };\n    },\n    methods : {\n      // 搜索之后 跳转至搜索页面\n      toSearch () {\n        this.$router.push({\n          path   : '/search',\n          // query 是 vue 提供的一种传参方式 ？ 后面用 & 隔开\n          query : this.formSearch,\n        });\n      },\n    },\n  };\n</script>\n\n<style scoped>\n  .logo {\n    max-width: 10em;\n    padding-top: 1em;\n    padding-bottom: 1em;\n  }\n\n  .search {\n    position: relative;\n    top: 15px;\n  }\n</style>","<template>\n  <div class=\"product-card\">\n    <el-card>\n      <router-link :to=\"`/product/${data.id}`\">\n        <img :src=\"data.main_img ? fileUrl(data.main_img[0]) : holder.productMainImg\"\n             class=\"image\">\n      </router-link>\n      <div style=\"padding: 14px;\">\n        <router-link :to=\"`/product/${data.id}`\">\n          <span>{{data.title | cut(27)}}</span>\n        </router-link>\n        <p>\n          <span class=\"hot cny\">{{data.price}}</span>\n        </p>\n      </div>\n    </el-card>\n  </div>\n</template>\n\n<script>\n  import { fileUrl } from '../lib/helper';\n  import holder      from '../config/holder';\n\n  export default {\n    props : [ 'data' ],\n    data() {\n      return {\n        holder\n      }\n    },\n    methods: {\n      fileUrl,\n    }\n  };\n</script>\n\n<style>\n  .product-card .el-card__body {\n    padding: 0;\n  }\n</style>","<template>\n    <div>\n      <RegularNav />\n      <div class=\"container carousel\">\n        <el-carousel :interval=\"4000\" type=\"card\" height=\"200px\">\n          <el-carousel-item v-for=\"it in list_carousel\" :key=\"it.id\">\n            <router-link :to=\"`/product/${it.id}`\">\n              <img :src=\"fileUrl(it.carousel_img)\" alt=\"\">\n            </router-link>\n          </el-carousel-item>\n        </el-carousel>\n      </div>\n      <div class=\"container\">\n        <h2>新品</h2>\n        <el-row :gutter=\"10\" class=\"card-list vartical-gutter\">\n          <el-col :key=\"it\" v-for=\"it in list_new\" :span=\"6\">\n            <ProductCard :data=\"it\" />\n          </el-col>\n        </el-row>\n      </div>\n      <div class=\"container\">\n        <h2>促销</h2>\n        <el-row :gutter=\"10\" class=\"card-list vartical-gutter\">\n          <el-col :key=\"it\" v-for=\"it in list_hot\" :span=\"6\">\n            <ProductCard :data=\"it\" />\n          </el-col>\n        </el-row>\n      </div>\n    </div>\n</template>\n\n<script>\n  import RegularNav from '../components/RegularNav';\n  import ProductCard from '../components/ProductCard';\n  import { fileUrl } from '../lib/helper';\n\n  export default {\n    name: 'Home',\n    data() {\n      return {\n        list_new : [],\n        list_hot : [],\n        list_carousel : []\n      }\n    },\n    components: {\n      RegularNav,\n      ProductCard\n    },\n    methods: {\n      fileUrl,\n\n      read_new() {\n        api('product/read', {where: {and: {is_new: true}}})\n          .then( r => this.list_new = r.data)\n      },\n      read_hot() {\n        api('product/read', {where: {and: {is_hot: true}}})\n          .then( r => this.list_hot = r.data)\n      },\n      read_carousel() {\n        api('product/read', {where: {and: {is_carousel: true}}})\n          .then( r => this.list_carousel = r.data)\n      }\n    },\n    mounted() {\n      this.read_new();\n      this.read_hot();\n      this.read_carousel();\n    },\n  }\n</script>\n\n<style scoped>\n.el-carousel__item h3 {\n  color: #475669;\n  font-size: 14px;\n  opacity: 0.75;\n  line-height: 200px;\n  margin: 0;\n}\n\n.el-carousel__item:nth-child(2n) {\n  background-color: #99a9bf;\n}\n\n.el-carousel__item:nth-child(2n+1) {\n  background-color: #d3dce6;\n}\n\n.carousel {\n  margin-top: 1em;\n}\n</style>\n","<template>\n  <div>\n    <RegularNav/>\n    <div class=\"container overview\">\n      <el-row :gutter=\"10\" class=\"overview\">\n        <el-col class=\"preview\" :span=\"10\">\n          <el-carousel indicator-position=\"outside\">\n            <!-- <el-carousel-item v-if=\"!row.main_img || !row.main_img.length == 0\">\n              <img :src=\"holder.productMainImg\" alt=\"\">\n            </el-carousel-item> -->\n            <el-carousel-item v-for=\"it in row.main_img\" :key=\"it.id\">\n              <img class=\"main_ing\" :src=\"fileUrl(it)\" alt=\"\">\n            </el-carousel-item>\n          </el-carousel>\n        </el-col>\n        <el-col class=\"text\" :span=\"14\">\n          <h1 class=\"title\">{{row.title}}</h1>\n          <div class=\"well\">\n            <dl class=\"pair\">\n              <dt>价格</dt>\n              <dd class=\"hot cny\">{{row.price}}</dd>\n            </dl>\n            <dl class=\"pair\">\n              <dt>运费</dt>\n              <dd class=\"cny\">{{row.shipping_fee}}</dd>\n            </dl>\n          </div>\n          <el-row>\n            <el-col :span=\"8\">\n              月销量 <span class=\"hot\">222</span>\n            </el-col>\n            <el-col :span=\"8\">\n              累计评价 <span class=\"hot\">325</span>\n            </el-col>\n            <el-col :span=\"8\">\n              库存 <span class=\"hot\">{{row.total}}</span>\n            </el-col>\n          </el-row>\n          <dl :key=\"options\" v-for=\"(options, key) in row.prop\" class=\"pair\">\n            <dt>{{key}}</dt>\n            <dd>\n              <div :class=\"'pill-option ' + (form.prop[key] === option ? 'active': '')\" @click=\"setProp(key, option)\" :key=\"option\" v-for=\"option in options\">{{option}}</div>\n            </dd>\n          </dl>\n          <dl class=\"pair\">\n            <dt>数量</dt>\n            <dd>\n              <el-input-number v-model=\"form.count\" size=\"mini\" :min=\"1\" label=\"描述文字\"></el-input-number>\n            </dd>\n          </dl>\n          <div class=\"text-left\">\n            <el-button @click=\"createOrder\" size=\"small\" type=\"danger\">立即购买</el-button>\n            <el-button @click=\"addToCart\" size=\"small\" type=\"primary\">加入购物车</el-button>\n          </div>\n          <dl class=\"pair\">\n            <dt>服务承诺</dt>\n            <dd>\n              <a class=\"anchor\" href=\"#\">破损包退</a>\n              <a class=\"anchor\" href=\"#\">正品保证</a>\n              <a class=\"anchor\" href=\"#\">极速退款</a>\n              <a class=\"anchor\" href=\"#\">七天无理由退换</a>\n              <a class=\"anchor\" href=\"#\">支付方式</a>\n            </dd>\n          </dl>\n        </el-col>\n      </el-row>\n    </div>\n    <div class=\"container detail\">\n      <div class=\"props\">\n        <el-row>\n          <el-col class=\"pair\" :span=\"8\">\n            <div>生产许可证编号</div>\n            <div>SC12543062605639</div>\n          </el-col>\n          <el-col class=\"pair\" :span=\"8\">\n            <div>产品标准号</div>\n            <div>Q/YPXY 0002S</div>\n          </el-col>\n          <el-col class=\"pair\" :span=\"8\">\n            <div>厂名</div>\n            <div>平江县新翔宇食品有限公司</div>\n          </el-col>\n          <el-col class=\"pair\" :span=\"8\">\n            <div>产品标准号</div>\n            <div>Q/YPXY 0002S</div>\n          </el-col>\n          <el-col class=\"pair\" :span=\"8\">\n            <div>生产许可证编号</div>\n            <div>SC12543062605639</div>\n          </el-col>\n          <el-col class=\"pair\" :span=\"8\">\n            <div>产品标准号</div>\n            <div>Q/YPXY 0002S</div>\n          </el-col>\n          <el-col class=\"pair\" :span=\"8\">\n            <div>厂名</div>\n            <div>平江县新翔宇食品有限公司</div>\n          </el-col>\n          <el-col class=\"pair\" :span=\"8\">\n            <div>产品标准号</div>\n            <div>Q/YPXY 0002S</div>\n          </el-col>\n          <el-col class=\"pair\" :span=\"8\">\n            <div>生产许可证编号</div>\n            <div>SC12543062605639</div>\n          </el-col>\n          <el-col class=\"pair\" :span=\"8\">\n            <div>产品标准号</div>\n            <div>Q/YPXY 0002S</div>\n          </el-col>\n          <el-col class=\"pair\" :span=\"8\">\n            <div>厂名</div>\n            <div>平江县新翔宇食品有限公司</div>\n          </el-col>\n          <el-col class=\"pair\" :span=\"8\">\n            <div>产品标准号</div>\n            <div>Q/YPXY 0002S</div>\n          </el-col>\n        </el-row>\n      </div>\n      <div class=\"content\">\n        <div :key=\"it\" v-for=\"it in row.detail\">\n          <div class=\"text\" v-if=\"it.type === 'text'\">{{it.value}}</div>\n          <div class=\"text\" v-else>\n            <img :src=\"fileUrl(it.value)\" :alt=\"it.value.name\">\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n  import RegularNav      from '../components/RegularNav';\n  import { fileUrl }     from '../lib/helper';\n  import { createOrder } from '../lib/order';\n  import session         from '../lib/session';\n  import cartService     from '../service/cart';\n  import holder          from '../config/holder';\n\n  export default {\n    components : { RegularNav },\n    name: 'Product',\n    data () {\n      return {\n        holder,\n        cartService,\n\n        form : {\n          count : 1,\n          prop  : {},\n        },\n        row  : {\n          id : null,\n        },\n      };\n    },\n    mounted () {\n      this.row.id = this.$route.params.id;\n      this.find();\n    },\n    methods    : {\n      fileUrl,\n\n      // 当点击个性属性执行的函数， 比如说  辣度：特辣 \n      setProp (key, value) {\n        this.$set(this.form.prop, key, value);\n      },\n\n      // 添加到购物车\n      addToCart () {\n        let row  = this.row;\n        let form = this.form;\n\n        if (!this.validateForm())\n          return;\n\n        cartService.change(row.id, form.count, row, form.prop);\n      },\n\n      // 点击购买该执行的函数， product_snapshot 当前要购买商品信息的快照\n      createOrder () {\n        let p = this.row;\n        let f = this.form;\n\n        f.product_id       = p.id;\n        f.product_snapshot = p;\n\n        // order 是一条订单数据，而 this.form 仅仅是一个商品 给 order 自定义添加的 detail 属性  再添加 sum 属性，  detail: [this.form] 允许添加多条也就是可以购买多个 购物车的形式\n        // let order = { detail: [this.form] }\n        // order.sum = orderSum(order.detail);\n        // order.user_id = session.user('id');\n        // order.status = 'created';\n\n        if (!this.validateForm())\n          return;\n\n        // 点击购买之后，直接跳转至订单详情页\n        // api('order/create', order)\n        //   .then( (r) => {\n        //     this.$router.push(`/my/order/${r.data.id}`)\n        //   });\n\n        // 重构直接购买功能  this.form 提交的那个表单  session.user('id') 就是谁的订单  （重构之后，订单全部由 order.js 生成的）\n        createOrder([ f ], session.user('id'))\n          .then(r => {\n            this.$router.push(`/my/order/${r.data.id}`);\n          });\n      },\n\n      // 添加前先验证\n      validateForm () {\n        if (session.isAdmin()) {\n          alert('管理员暂不可购买商品');\n          return;\n        }\n\n        if (!this.allPropsChecked()) {\n          alert('请选择所有属性选项');\n          return false;\n        }\n\n        if (!this.form.count) {\n          alert('请选择数量');\n          return false;\n        }\n\n        return true;\n      },\n\n      // 在创建一条订单之前，首先要验证 每个个性属性都必须有选中的选项  循环prop里面所有的个性属性，一旦有没选中的就返回false\n      allPropsChecked () {\n        let p = this.row.prop;\n        for (let key in p) {\n          if (!this.form.prop[ key ])\n            return false;\n        }\n\n        return true;\n      },\n\n      find () {\n        api('product/find', this.row)\n          .then(r => {\n            this.row = r.data;\n            this.normalize();\n          });\n      },\n\n      // 拿到数据后分割好渲染 用 propList 替换掉 row 里面的 prop\n      normalize () {\n        let p          = this.row.prop;\n        let betterProp = {};\n\n        for (let key in p) {\n          let options       = p[ key ];\n          betterProp[ key ] = options.split('|');\n        }\n\n        this.$set(this.row, 'prop', betterProp);\n      },\n    },\n  };\n</script>\n\n<style scoped>\n  .el-carousel__item h3 {\n    color: #475669;\n    font-size: 18px;\n    opacity: 0.75;\n    line-height: 300px;\n    margin: 0;\n  }\n  \n  .el-carousel__item:nth-child(2n) {\n    background-color: #99a9bf;\n  }\n  \n  .el-carousel__item:nth-child(2n+1) {\n    background-color: #d3dce6;\n  }\n\n  .pair > *:nth-child(odd) {\n    font-size: 80%;\n    margin-right: 3em;\n  }\n\n  .overview .hot.cny {\n    font-size: 120%;\n  }\n\n  .title {\n    font-size: 1.1rem;\n  }\n\n  .detail > *,\n  .text > * {\n    margin-bottom: .8em;\n  }\n\n  .pill-option {\n    display: inline-block;\n    margin-right: .5em;\n    padding: .3em .5em;\n    border: 2px solid rgba(0, 0, 0, .2);\n    font-size: 80%;\n    cursor: default;\n  }\n\n  .pill-option.active {\n    border-color: #e10;\n  }\n\n  .pill-option.selected {\n    border-color: #e10;\n  }\n\n  .props {\n    border: 1px solid rgba(0, 0, 0, .1);\n    padding: 1em;\n    font-size: 80%;\n    color: #666;\n  }\n\n  .props .el-col {\n    margin-bottom: .3em;\n  }\n\n  .props .pair > * {\n    margin-right: 0;\n    margin-left: 0;\n  }\n\n  .props .pair > *:nth-child(odd) {\n    width: 40%;\n  }\n\n  .props .pair > *:nth-child(even) {\n    width: 60%;\n  }\n\n  .main_ing {\n    display: block;\n    width: 100%;\n  }\n</style>","<template>\n  <el-row>\n    <el-col :span=\"3\" class=\"type\">{{propName}}</el-col>\n    <el-col :span=\"21\">\n      <div \n        @click=\"select(it)\" \n        :key=\"it\" \n        v-for=\"it in data\" \n        :class=\"'option ' + ((selected && (selected.id == it.id)) ? 'active' : '')\"\n      >\n        {{it.name}}\n      </div>\n    </el-col>\n  </el-row>\n</template>\n\n<script>\n  export default {\n    props   : [ 'data', 'propName', 'initial' ],\n    data () {\n      return {\n        selected : null,      // 对象结构\n      };\n    },\n    mounted() {\n      // 如果父元素传了 initial 某一种属性分类下的某一项，则一开始就选中那一项并筛选结果\n      if(this.initial)\n        this.selected = this.initial;\n    },\n    methods : {\n      // it 一个种类项， 如果某一个种类当前被选中 且 再次被选中 就取消被选中且清空当前符合选中条件的商品\n      select (it) {\n        if (this.selected && (this.selected.id == it.id)) {\n          this.selected = null;\n          this.$emit('clear', it);\n          return;\n        }\n        // 否则就换 子父通信 \n        this.selected = it;\n        this.$emit('change', it);\n      },\n    },\n    // 监听 一旦 initial 有变化执行 select 传入最新的值\n    watch: {\n      initial(n) {\n        this.select(n);\n      }\n    }\n  };\n</script>\n\n<style scoped>\n  .filter .type,\n  .filter .option {\n    display: inline-block;\n    cursor: pointer;\n    padding: 1em;\n  }\n\n  .filter .option.active {\n    background: #409EFF;\n    color: #fff;\n  }\n</style>","<template>\n  <div>\n    <div class=\"container\">\n      <el-row :gutter=\"10\">\n        <el-col :span=\"6\">\n          <router-link to=\"/\">\n            <div class=\"logo\">\n              <img src=\"../img/logo@2x.png\" alt=\"Logo\">\n            </div>\n          </router-link>\n        </el-col>\n        <el-col class=\"text-right\" :span=\"12\">\n          <form @submit.prevent=\"reload\" class=\"search\">\n            <el-input v-model=\"q.keyword\" suffix-icon=\"el-icon-search\"></el-input>\n          </form>\n        </el-col>\n        <el-col :span=\"6\">\n          <div class=\"logo\">\n\n          </div>\n        </el-col>\n      </el-row>\n    </div>\n    <div class=\"container\">\n      <div class=\"filter\">\n        <div class=\"table\">\n          <FilterProp @change=\"setPropFilter('cat_id', $event)\"\n                      @clear=\"removePropFilter('cat_id')\"\n                      propName=\"分类\"\n                      :initial=\"filterRestore.cat_id\"\n                      :data=\"listCat\"/>\n          <FilterProp @change=\"setPropFilter('brand_id', $event)\"\n                      @clear=\"removePropFilter('brand_id')\"\n                      propName=\"品牌\"\n                      :initial=\"filterRestore.brand_id\"\n                      :data=\"listBrand\"/>\n        </div>\n        <div class=\"bar\">\n          <div class=\"group\">\n            <el-button-group>\n              <el-button :type=\"q.sortBy == 'id' ? 'primary' : ''\" @click=\"setSortBy('id')\" size=\"mini\">新品\n                <span v-if=\"q.sortBy == 'id'\">\n                  <i v-if=\"q.sortUp == 1\" class=\"el-icon-caret-top\"></i><i v-else class=\"el-icon-caret-bottom\"></i>\n                </span>\n              </el-button>\n              <el-button :type=\"q.sortBy == 'price' ? 'primary' : ''\" @click=\"setSortBy('price')\" size=\"mini\">价格\n                <span v-if=\"q.sortBy == 'price'\">\n                  <i v-if=\"q.sortUp == 1\" class=\"el-icon-caret-top\"></i><i v-else class=\"el-icon-caret-bottom\"></i>\n                </span>\n              </el-button>\n              <el-button :type=\"q.sortBy == 'sales' ? 'primary' : ''\" @click=\"setSortBy('sales')\" size=\"mini\">销量\n                <span v-if=\"q.sortBy == 'sales'\">\n                  <i v-if=\"q.sortUp == 1\" class=\"el-icon-caret-top\"></i><i v-else class=\"el-icon-caret-bottom\"></i>\n                </span>\n              </el-button>\n            </el-button-group>\n          </div>\n          <div id=\"price-filter\" class=\"group\">\n            <el-col :span=\"12\">\n              <input @keyup=\"reload\"\n                     v-model=\"q.minPrice\"\n                     size=\"mini\"\n                     placeholder=\"最底价格\"\n              >\n              </input>\n            </el-col>\n            <el-col :span=\"12\">\n              <input @keyup=\"reload\"\n                     v-model=\"q.maxPrice\"\n                     size=\"mini\"\n                     placeholder=\"最高价格\"\n              >\n              </input>\n            </el-col>\n          </div>\n          <div class=\"group\">\n            <label>\n              <input @click=\"toggleBool('freeShipping')\"\n                     :checked=\"q.freeShipping\"\n                     type=\"checkbox\">\n              包邮\n            </label>\n            <label>\n              <input @click=\"toggleBool('hasDiscount')\"\n                     :checked=\"q.hasDiscount\"\n                     type=\"checkbox\">\n              折扣\n            </label>\n            <label>\n              <input @click=\"toggleBool('cod')\"\n                     :checked=\"q.cod\"\n                     type=\"checkbox\">\n              货到付款\n            </label>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"container\">\n      <div class=\"result\">\n        <el-row :gutter=\"5\" class=\"card-list vertical-gutter\">\n          <el-col :key=\"it\" v-for=\"it in list\" :span=\"6\">\n            <ProductCard :data=\"it\"/>\n          </el-col>\n        </el-row>\n        <el-pagination v-if=\"total != 0\"\n                       :total=\"total\"\n                       class=\"text-center\"\n                       layout=\"prev, pager, next\"\n                       :page-count=\"q.limit\"\n                       :current-page=\"q.page\"  \n                       @current-change=\"flip\"\n        >              <!-- current-page 一开始等于空 当变化了却感应不到变化  所以用 v-if=\"total != 0 -->\n        </el-pagination>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n  import RegularNav     from '../components/RegularNav';\n  import ProductCard    from '../components/ProductCard';\n  import { capitalize } from '../lib/helper';\n  import FilterProp     from '../components/search/FilterProp';\n\n  export default {\n    components : { FilterProp, ProductCard, RegularNav },\n    data () {\n      return {\n        list          : [],    // 用来存储 搜索查询返回来的数据\n        total         : 0,     // 用来存储 搜索查询返回来的总数\n        listCat       : [],    // 用来存储 分类返回来的数据\n        listBrand     : [],    // 用来存储 品牌返回来的数据\n        filterRestore : {\n          // brand_id: {           数据结构就是这样\n          //   id: 1,\n          //   name: 'lcd'\n          // }\n        },\n        q             : { // 地址传参的暂存区（this.$route.query的拷贝） 一开是在 mounted 里拷贝 后面变化在 $route 里拷贝\n          page  : 1,\n          limit : 16,\n          sortBy: 'id'\n        },\n      };\n    },\n\n    mounted () {\n      this.q = { ...this.q, ...this.$route.query, page : parseInt(this.$route.query.page) };  // 直接先把需要的数据拷贝到 q 里面\n      this.read('cat');                                                                       // 查询一次 cat 分类\n      this.read('brand');                                                                     // 查询一次 brand 分类\n      this.search();                                                                          \n      this.restoreSelectedPropFilter('brand', this.q[ '@brand_id' ], 'brand_id');             // 通过属性筛选其中某一项\n      this.restoreSelectedPropFilter('cat', this.q[ '@cat_id' ], 'cat_id');                   // 通过属性筛选其中某一项\n    }, \n    methods    : {\n      /** \n       * 通过属性过滤器的已有传参找到对应的数据 如：'http://...?...&@cat_id=1' 就应该寻找id = 1的那条cat数据，并将其\n       * 存入this.filterRestore内部，然后将其 传入<FilterProp/>组件中的initial属性中：<FilterProp :initial=\"filterRestore.cat_id\"/>\n       *\n       * @param model        比如 cat 或 brand\n       * @param id           比如  this.q[ '@brand_id' ] 或 this.q[ '@cat_id' ]\n       * @param filterName   比如 brand_id 或 cat_id\n       */\n      restoreSelectedPropFilter (model, id, filterName) {\n        // 没有选择  cat 或 brand 中的任何选项 就不用筛选全部显示\n        if (!id)\n          return;\n        // 找到 cat 或 brand 下的某一项\n        api(`${model}/find`, { id })\n          .then(r => {\n            this.$set(this.filterRestore, filterName, r.data);\n          });\n      },\n\n      // 通过子父通信的自定义事件函数 当某一个种类发生改变，筛选的商品也要跟着变  prop : cat_id 或 brand_id，  it 就是分类里面选中的那一项\n      setPropFilter (prop, it) {\n        this.q[ '@' + prop ] = it.id;\n        this.reload();\n      },\n\n      //  通过子父通信的自定义事件函数  清空符合的筛选项  prop : cat_id 或 brand_id\n      removePropFilter (prop) {\n        delete this.q[ '@' + prop ];\n        this.reload();\n      },\n\n      //  用来查询 拿到整个分类 或 品牌分类下的商品数据\n      read (type) {\n        api(`${type}/read`)\n          .then(r => this[ 'list' + capitalize(type) ] = r.data);\n      },\n\n      // 筛选函数 通过包邮折扣还是货到付款 来对商品分类  如果筛选已经存在说明已有键名 type 就删掉它，否则就显示 筛选键名等于1\n      toggleBool (type) {\n        if (this.q[ type ])\n          delete this.q[ type ];\n        else\n          this.q[ type ] = '1';\n\n        this.reload();\n      },\n\n      // 筛选函数 通过新品价格还是销量 来对商品排序\n      setSortBy (type) {\n        // 首先判断是 新品价格还是销量\n        if (this.q.sortBy == type) {\n          // 再次点击 然后再判断 如果是升序再点一下就 else 否则就等于 1 \n          if (!this.q.sortUp)\n            this.q.sortUp = '1';\n          else\n            delete this.q.sortUp;\n        }\n\n        this.q.sortBy = type;\n\n        this.reload();\n      },\n\n      // 提交表单之后 路由 $router 发生变化 watch 肯定会执行  （也就是说提交搜索之后，先触发 reload ()， 改变路由。再在 watch 中监控改变搜索页面 ）\n      reload () {\n        this.$router.push({\n          path  : '/search',\n          query : { ...this.q },\n        });\n      },\n      forEachPropFilter (fn) {\n        let q = this.q;\n        for (let key in q) {\n          if (!key.startsWith('@'))\n            continue;\n\n          fn(q[ key ], key);\n        }\n      },\n\n      // 翻页\n      flip (page) {\n        this.q.page = page;\n        this.reload();\n      },\n\n      // 真正发请求，开始搜索 \n      search () {\n        let q = this.q;\n\n        let keywordQuery      = `\"title\" contains \"${q.keyword}\"`;\n        let minPriceQuery     = q.minPrice ? `and \"price\" >= ${q.minPrice}` : '';\n        let maxPriceQuery     = q.maxPrice ? `and \"price\" <= ${q.maxPrice}` : '';\n        let freeShippingQuery = q.freeShipping ? `and \"shipping_fee\" = 0` : '';\n        let hasDiscountQuery  = q.hasDiscount ? `and \"discount\" > 0` : '';\n        let codQuery          = q.cod ? `and \"cod\" = 1` : '';\n        let propFilterQuery   = '';     \n\n        /**\n         * 本质就是将上面的这种类型 转换为 下面的查询语句类型   （分类 品牌 多个大分类下的筛选）\n         * {\n         *   '@cat_id': 1\n         *   '@brand_id': 2\n         *   'sortBy': ['a']\n         * }\n         * 转换后\n         * 'and \"cat_id\" = 1 and \"brand_id\" = 2'\n         */\n        this.forEachPropFilter((value, key) => {\n          let prop = key.slice(1);\n          propFilterQuery += ` and \"${prop}\" = \"${value}\" `;\n        });\n\n        // 所有的 子查询条件 比如有没有 关键字 最低价格 最高价格 包邮 折扣 货到付款等，  propFilterQuery 通过某一种分类或品牌分\n        let query = `where(\n          ${keywordQuery}\n          ${minPriceQuery}\n          ${maxPriceQuery}\n          ${freeShippingQuery}\n          ${hasDiscountQuery}\n          ${codQuery}\n          ${propFilterQuery}\n        )`;\n\n        let param = {\n          query,\n          sort_by : [ (q.sortBy || 'id'), q.sortUp ? 'up' : 'down' ],     // 是生序排列还是降序\n          limit   : this.limit,\n          page    : q.page,\n          limit   : q.limit,\n        };\n\n        api('product/read', param)\n          .then(r => {\n            this.list  = r.data;\n            this.total = r.total;\n          });\n      },\n    },\n\n    // RegularNav 组件中有了关键字的变化 所以才监控 $route 的变化 一切都是通过 $route 触发的 ， 一旦 $route 发生变化 this.q 就拷贝一份\n    watch      : {\n      $route : {\n        deep : true,\n        // 一旦路由发生变化， handler 将会执行，再去搜索\n        handler (news, old) {\n          this.q = { ...this.q, ...news.query, page : parseInt(news.query.page) };\n          this.search();\n        },\n      },\n    },\n  };\n</script>\n\n<style scoped>\n  .search {\n    margin-top: 1em;\n    margin-bottom: 1em;\n  }\n\n  .filter {\n    color: #666;\n  }\n\n  .filter > * {\n    margin-bottom: .5em;\n  }\n\n  .filter .table > * {\n    border: 1px solid rgba(0, 0, 0, .1);\n    border-bottom-width: 0;\n  }\n\n  .filter .table > *:last-child {\n    border-bottom-width: 1px;\n  }\n\n  .filter .type {\n    font-size: 90%;\n    opacity: .8;\n  }\n\n\n  .bar > * {\n    display: inline-block;\n    vertical-align: middle;\n  }\n\n  .bar .group {\n    margin-right: .5em;\n  }\n\n  #price-filter {\n    max-width: 14em;\n  }\n\n  #price-filter input {\n    width: 100%;\n  }\n\n\n  .el-checkbox {\n    margin-right: .5em;\n  }\n</style>","<template>\n  <div>\n    <el-row :gutter=\"10\">\n      <el-col :span=\"4\">\n        <el-menu\n          default-active=\"cart\"\n          :router=\"true\"\n          class=\"el-menu-vertical-demo\"\n          @open=\"handleOpen\"\n          @close=\"handleClose\">\n          <el-menu-item class=\"side-focus\" index=\"cart\">\n            <span slot=\"title\">购物车</span>\n          </el-menu-item>\n          <el-menu-item class=\"side-focus\" index=\"order\">\n            <span slot=\"title\">订单</span>\n          </el-menu-item>\n          <el-menu-item class=\"side-focus\" index=\"settings\">\n            <span slot=\"title\">设置</span>\n          </el-menu-item>\n        </el-menu>\n      </el-col>\n      <el-col :span=\"20\">\n        <router-view></router-view>\n      </el-col>\n    </el-row>\n  </div>\n</template>\n\n<script>\n  export default {\n    name: 'My',\n    components: {\n    },\n    methods: {\n      handleOpen () {},\n      handleClose () {}\n    },\n  }\n</script>\n\n<style>\n  .side-focus:focus {\n    color: tomato;\n  }\n</style>","<template>\n  <div>\n    <h1>我的订单</h1>\n    <el-card class=\"detail\" v-if=\"$route.params.id\">\n      <div slot=\"header\" class=\"clearfix\">\n        <span>订单详情</span>\n        <router-link style=\"float: right;\" to=\"/my/order\">关闭</router-link>\n        <!--<el-button style=\"float: right; padding: 3px 0\" type=\"text\">操作按钮</el-button>-->\n      </div>\n      <div class=\"card-content\">\n        <div class=\"pair\">\n          <div>订单号</div>\n          <div>{{form.id}}</div>\n        </div>\n        <div class=\"pair\">\n          <div>总价</div>\n          <div class=\"cny\">{{form.sum}}</div>\n        </div>\n        <div class=\"pair\">\n          <div>付款方式</div>\n          <div>{{lang.payment[form._pay_by] || '-'}}</div>\n        </div>\n        <div class=\"pair\">\n          <div>订单状态</div>\n          <div>{{form._paid ? '已支付': '未支付'}}</div>\n        </div>\n\n        <div v-if=\"!form._paid\" style=\"margin-top: 1em;\">\n          <div class=\"title\">请选择支付方式</div>\n          <p>测试支付价格不会超过0.2元</p>\n          <el-button @click=\"generatePaymentUrl('wechat')\">微信支付</el-button>\n          <el-button @click=\"generatePaymentUrl('alipay')\">支付宝</el-button>\n\n          <div v-if=\"form.$payment\">\n            <p v-if=\"form._pay_by === 'wechat'\">\n              <img class=\"qrcode\" :src=\"form.$payment.qrcode\" alt=\"支付二维码\">\n              <el-button type=\"primary\" @click=\"read(); find()\">支付完毕</el-button>\n            </p>\n            <p v-else>\n              <a :href=\"form.$payment.url\">跳转支付宝扫码支付</a>\n            </p>\n          </div>\n        </div>\n      </div>\n    </el-card>\n    <el-table\n            :data=\"list\"\n            stripe\n            style=\"width: 100%\">\n      <el-table-column\n              prop=\"id\"\n              label=\"订单号\"\n              width=\"100\">\n      </el-table-column>\n      <el-table-column\n              prop=\"sum\"\n              label=\"总价\"\n              width=\"50\">\n      </el-table-column>\n      <el-table-column\n              label=\"状态\"\n              width=\"180\">\n        <template slot-scope=\"scope\">\n          {{scope.row._paid ? '已支付': '未支付'}}\n        </template>\n      </el-table-column>\n      <el-table-column\n              fixed=\"right\"\n              label=\"操作\"\n              width=\"100\">\n        <template slot-scope=\"scope\">\n          <el-button type=\"text\" size=\"small\">\n            <router-link :to=\"`/my/order/${scope.row.id}`\">详情</router-link>\n          </el-button>\n        </template>\n      </el-table-column>\n\n    </el-table>\n  </div>\n</template>\n\n<script>\n  import session from '../lib/session';\n  import { url } from '../lib/helper';\n\n  export default {\n    data () {\n      return {\n        form   : {},\n        list   : [],\n        params : {},\n        lang   : {\n          payment : {\n            alipay : '支付宝',\n            wechat : '微信支付',\n          },\n          status  : {\n            created : '未支付',\n            paid    : '已支付',\n          },\n        },\n      };\n    },\n    // 页面挂载之后 先执行 read 拿到用户的订单数据\n    mounted () {\n      this.read();\n      // 如果点击了某一条 就把 this.$route.params.id 的值赋值给 this.form.id 然后通过 find() 去查找 id: this.form.id 满足条件的结果\n      this.form.id = this.$route.params.id;\n      if (this.form.id)\n        this.find();\n    },\n    methods : {\n      find () {\n        api('order/find', { id : this.form.id })\n          .then(r => this.form = r.data);\n      },\n      read () {\n        api('order/read', { where : { and : { user_id : session.user('id') } } })\n          .then(r => this.list = r.data);\n      },\n      // 点击用什么支付 之后执行的函数\n      generatePaymentUrl (type) {\n        // 避免第一次选中后无法再次更改 \n        this.form._pay_by = type;\n        api('order/payment/url', {\n          id         : this.form.id,\n          pay_by     : type,\n          fee        : .2,\n          return_url : url('#/my/order'),\n        })\n          .then(r => {\n            this.$set(this.form, '$payment', r.data);\n          });\n      },\n    },\n    // 深度监听 一旦有 news.params 说明就点击新的值了 就重新执行 find()\n    watch : {\n      '$route' : {\n        handler (n, o) {\n          let params = n.params;\n          if (params.id) {\n            this.form.id = params.id;\n            this.find();\n          }\n        },\n        deep : true,\n      },\n    },\n  };\n</script>\n\n<style scoped>\n  .card-content {\n    padding: 1em;\n  }\n\n  .detail .title {\n    margin: .5em 0;\n  }\n\n  .qrcode {\n    max-width: 200px;\n  }\n</style>\n","form .title {\n  font-weight: bold;\n  display: block;\n}","<template>\n            <!--  下拉菜单  -->\n  <div>\n    <div class=\"dropdown\">\n      <div class=\"filter\">\n        <input @focus=\"visible=true; reset()\"\n               :class=\"className\"\n               @blur=\"hideResult(); $emit('blur')\"\n               type=\"search\"\n               v-model=\"keyword\"\n        >\n      </div>\n      <div v-if=\"visible\" class=\"list\">\n        <div :key=\"it\" @mousedown=\"select(it)\" v-for=\"it in result\" class=\"option\">{{it[displayBy]}}</div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n  import api from '../lib/api';\n\n  export default {\n    props   : [\n      'list', 'searchBy',\n      'displayBy', 'onSelect',\n      'api', 'className',\n    ],\n    data () {\n      return {\n        visible : false,\n        keyword : '',\n        result  : [],\n        timer   : null,\n      };\n    },\n    mounted () {\n      if (this.api) {\n        this.filterAsync();\n      } else {\n        this.result = [ ...this.list ];\n        // this.list.find(it => {\n        //   return it[]\n        // })\n      }\n    },\n    methods : {\n      hideResult () {\n        setTimeout(() => {\n          this.visible = false;\n        }, 1);\n      },\n      reset () {\n        this.keyword = '';\n        this.select(null);\n      },\n      select (it) {\n        if (it)\n          this.keyword = it[ this.displayBy ];\n\n        if (!it || !this.onSelect)\n          return;\n\n        this.onSelect(it);\n      },\n      filter () {\n        this.result = this.list.filter(it => {\n          return it[ this.searchBy ].includes(this.keyword);\n        });\n      },\n      filterAsync () {\n        let params = {};\n        if (this.keyword)\n          params = {\n            query : `where(\"${this.searchBy}\" contains \"${this.keyword}\")`,\n          };\n\n        api(this.api, params)\n          .then(r => this.result = r.data || []);\n      },\n      debounceFilterAsync () {\n        if (this.timer)\n          clearTimeout(this.timer);\n\n        this.timer = setTimeout(() => {\n          this.filterAsync();\n        }, 300);\n      },\n    },\n    watch   : {\n      keyword (n, o) {\n        if (this.api)\n          this.debounceFilterAsync();\n        else\n          this.filter();\n      },\n    },\n  };\n</script>\n\n<style scoped>\n  .dropdown {\n    display: block;\n    position: relative;\n  }\n\n  .dropdown input {\n    width: 100%;\n  }\n\n  .list {\n    background: #fff;\n    border: 1px solid rgba(0, 0, 0, .2);\n  }\n\n  .option {\n    padding: .2rem .5rem;\n  }\n\n  .option:hover {\n    background: rgba(0, 40, 180, .2);\n  }\n\n  .list {\n    position: absolute;\n    /*top: 33px;*/\n    z-index: 100;\n    width: 100%;\n  }\n</style>","<template>\n  <div>\n    <h1>商品管理</h1>\n    <div>\n      <el-button-group>\n        <el-button @click=\"ui.formVisible = !ui.formVisible\">\n          <span v-if=\"ui.formVisible\">取消</span>\n          <span v-else>创建</span>\n        </el-button>\n      </el-button-group>\n    </div>\n    <div v-if=\"ui.formVisible\">\n      <h2>添加/修改</h2>\n      <form @submit.prevent=\"createOrUpdate\">\n        <label>\n          <span class=\"title\">标题</span>\n          <input class=\"el-input__inner\" type=\"text\" v-model=\"form.title\">\n          <span class=\"error-list\">\n            <span :key=\"e\" v-if=\"invalid\" v-for=\"(invalid, e) in errors.title\" class=\"error\">{{rules.title[e].msg}}</span>\n          </span>\n        </label>\n        <label>\n          <span class=\"title\">分类</span>\n          <Dropdown api=\"cat/read\"\n                    searchBy=\"name\"\n                    displayBy=\"name\"\n                    select=\"form.cat_id\"\n                    className=\"el-input__inner\"\n                    :onSelect=\"makeSelect('cat_id')\"\n          />\n          <span class=\"error-list\">\n            <span :key=\"e\" v-if=\"invalid\" v-for=\"(invalid, e) in errors.cat_id\" class=\"error\">{{rules.cat_id[e].msg}}</span>\n          </span>\n        </label>\n        <label>\n          <span class=\"title\">品牌</span>\n          <Dropdown api=\"brand/read\"\n                    searchBy=\"name\"\n                    displayBy=\"name\"\n                    select=\"form.brand_id\"\n                    className=\"el-input__inner\"\n                    :onSelect=\"makeSelect('brand_id')\"\n          />\n          <span class=\"error-list\">\n            <span :key=\"e\" v-if=\"invalid\" v-for=\"(invalid, e) in errors.brand_id\" class=\"error\">{{rules.brand_id[e].msg}}</span>\n          </span>\n        </label>\n        <label>\n          <span class=\"title\">价格</span>\n          <input class=\"el-input__inner\" type=\"number\" v-model=\"form.price\">\n          <span class=\"error-list\">\n            <span :key=\"e\" v-if=\"invalid\" v-for=\"(invalid, e) in errors.price\" class=\"error\">{{rules.price[e].msg}}</span>\n          </span>\n        </label>\n        <label>\n          <span class=\"title\">运费</span>\n          <input class=\"el-input__inner\" type=\"number\" v-model=\"form.shipping_fee\">\n          <span class=\"error-list\">\n            <span :key=\"e\" v-if=\"invalid\" v-for=\"(invalid, e) in errors.shipping_fee\"\n                  class=\"error\">{{rules.shipping_fee[e].msg}}</span>\n          </span>\n        </label>\n\n        <label>\n          <span class=\"title\">库存</span>\n          <input class=\"el-input__inner\" type=\"number\" v-model=\"form.total\">\n          <span class=\"error-list\">\n            <span :key=\"e\" v-if=\"invalid\" v-for=\"(invalid, e) in errors.total\" class=\"error\">{{rules.total[e].msg}}</span>\n          </span>\n        </label>\n\n        <label>\n          <span class=\"title\">销量</span>\n          <input class=\"el-input__inner\" type=\"number\" v-model=\"form.sales\">\n          <span class=\"error-list\">\n            <span :key=\"e\" v-if=\"invalid\" v-for=\"(invalid, e) in errors.sales\" class=\"error\">{{rules.sales[e].msg}}</span>\n          </span>\n        </label>\n\n        <label>\n          <span class=\"title\">折扣</span>\n          <input class=\"el-input__inner\"\n                 step=\"0.01\"\n                 type=\"number\"\n                 v-model=\"form.discount\">\n          <span class=\"error-list\">\n            <span :key=\"e\" v-if=\"invalid\" v-for=\"(invalid, e) in errors.discount\" class=\"error\">{{rules.discount[e].msg}}</span>\n          </span>\n        </label>\n\n        <label>\n          <span class=\"title\">货到付款</span>\n          <el-switch\n                  v-model=\"form.cod\"\n                  active-color=\"#13ce66\"\n                  inactive-color=\"#aaa\">\n          </el-switch>\n        </label>\n\n        <label>\n          <span class=\"title\">热卖</span>\n          <el-switch\n                  v-model=\"form.is_hot\"\n                  active-color=\"#13ce66\"\n                  inactive-color=\"#aaa\">\n          </el-switch>\n        </label>\n\n        <label>\n          <span class=\"title\">新品</span>\n          <el-switch\n                  v-model=\"form.is_new\"\n                  active-color=\"#13ce66\"\n                  inactive-color=\"#aaa\">\n          </el-switch>\n        </label>\n\n        <label>\n          <span class=\"title\">轮播展示</span>\n          <el-switch\n                  v-model=\"form.is_carousel\"\n                  active-color=\"#13ce66\"\n                  inactive-color=\"#aaa\">\n          </el-switch>\n        </label>\n\n        <div v-if=\"form.is_carousel\">\n          <label>\n            <span class=\"title\">轮播图片</span>\n            <Uploader @uploadSuccess=\"carouselUploaded\" :autoUpload=\"true\"/>\n          </label>\n          <img v-if=\"form.carousel\" :src=\"fileUrl(form.carousel)\" :alt=\"img.name\">\n        </div>\n\n        <label>\n          <span class=\"title\">独有属性</span>\n          <!--<button type=\"button\" class=\"el-button el-button&#45;&#45;default\">+</button>-->\n          <!-- 自定义添加的属性  -->\n          <div class=\"row\">\n            <input v-model=\"propForm.key\" class=\"even\" type=\"text\" placeholder=\"名称\">\n            <input v-model=\"propForm.value\" class=\"even\" type=\"text\" placeholder=\"可选的值，请用|隔开\">\n            <button @click=\"addProp\" type=\"button\">完成</button>\n          </div>\n          <!-- 当点击完成按钮后 就把键值对 渲染到页面上 -->\n          <div :key=\"k\" v-for=\"(v, k) in form.prop\" class=\"row\">\n            <span>{{k}}</span>:\n            <span>{{v}}</span>\n            <!--<input v-model=\"v\" class=\"even\" type=\"text\" placeholder=\"可选的值，请用|隔开\">-->\n            <button @click=\"removeProp(k)\" type=\"button\">-</button>\n            <button @click=\"fillPropForm(k, v)\" type=\"button\">编辑</button>\n          </div>\n          <span class=\"error-list\">\n            <span :key=\"e\" v-if=\"invalid\" v-for=\"(invalid, e) in errors.total\" class=\"error\">{{rules.total[e].msg}}</span>\n          </span>\n        </label>\n\n        <div>\n          <label>\n            <span class=\"title\">主图</span>\n            <Uploader @uploadSuccess=\"singleCoverUploaded\" :autoUpload=\"true\"/> <!-- 插入主图的组件  -->\n          </label>\n          <el-row>\n            <el-col :key=\"img\" class=\"thumbnail\" :span=\"6\" v-for=\"img in form.main_img\">\n              <img :src=\"fileUrl(img)\" :alt=\"img.name\">\n              <div>{{img._original_name}}</div>\n            </el-col>\n          </el-row>\n        </div>\n\n\n        <div>\n          <div class=\"title\">详情描述</div>\n          <button type=\"button\" @click=\"inertDesc('text')\">插入文字</button>\n          <button type=\"button\" @click=\"inertDesc('image')\">插入图片</button>\n          <div>\n            <div :key=\"i\" class=\"segment\" v-for=\"(it, i) in form.detail\">\n              <button type=\"button\" @click=\"removeDesc(i)\">删除</button>\n              <div v-if=\"it.type === 'text'\" class=\"text\">\n                <el-input type=\"textarea\" v-model=\"it.value\"/>\n              </div>\n              <div v-else class=\"image\">\n                <Uploader @uploadSuccess=\"singleDescImageUploaded($event, i)\" :autoUpload=\"true\"/>\n                <div v-if=\"it.value\">\n                  <img :src=\"fileUrl(it.value)\" alt=\"\">\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <label>\n          <button class=\"el-button el-button--primary\" type=\"submit\">提交</button>\n          <button class=\"el-button el-button--text\" @click=\"ui.formVisible=false\">取消</button>\n        </label>\n      </form>\n    </div>\n    <div>\n      <h2>列表</h2>\n      <p>总数：{{total}}</p>\n      <el-table :data=\"list\"\n                stripe\n                style=\"width: 100%\">\n        <el-table-column\n                prop=\"title\"\n                label=\"标题\"\n                width=\"180\">\n        </el-table-column>\n        <el-table-column\n                label=\"主图\"\n                width=\"200\">\n          <template slot-scope=\"scope\">\n            <div :key=\"img\" class=\"thumbnail\" v-for=\"img in scope.row.main_img\">\n              <img :src=\"fileUrl(img)\" :alt=\"img.name\">\n              <div>{{img._original_name}}</div>\n            </div>\n          </template>\n        </el-table-column>\n        <el-table-column\n                prop=\"$cat.name\"\n                label=\"分类\"\n                width=\"180\">\n        </el-table-column>\n        <el-table-column\n                prop=\"$brand.name\"\n                label=\"品牌\"\n                width=\"180\">\n        </el-table-column>\n        <el-table-column\n                prop=\"price\"\n                label=\"价格\"\n                width=\"180\">\n        </el-table-column>\n        <el-table-column\n                prop=\"shipping_fee\"\n                label=\"运费\"\n                width=\"180\">\n        </el-table-column>\n        <el-table-column\n                prop=\"total\"\n                label=\"库存\"\n                width=\"180\">\n        </el-table-column>\n        <el-table-column\n                fixed=\"right\"\n                label=\"操作\"\n                width=\"100\">\n          <template slot-scope=\"scope\">\n            <el-button @click=\"fill(scope.row)\" type=\"text\" size=\"small\">更新</el-button>\n            <el-button @click=\"remove(scope.row.id)\" type=\"text\" size=\"small\">删除</el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n      <div class=\"text-center\">\n        <el-pagination\n                :page-size=\"readParam.limit\"\n                :current-page=\"readParam.page\"\n                layout=\"prev, pager, next\"\n                :total=\"total\"\n                @current-change=\"flip\"\n        >\n        </el-pagination>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n  import { call as valee } from '../../lib/valee';\n  import Dropdown          from '../../components/Dropdown';\n  import admin             from '../../mixin/admin';\n  import Uploader          from '../../components/Uploader';\n  import { fileUrl }       from '../../lib/helper';\n\n\n  export default {\n    components : { Uploader, Dropdown },\n    mixins     : [ admin ],\n    data () {\n      return {\n        model     : 'product',\n        propForm  : { key : '', value : '' }, // 独有属性表单数据\n        readParam : {\n          with : [\n            'belongs_to:cat',\n            'belongs_to:brand',\n            // {\n            //   model       : 'cat',\n            //   relation    : 'belongs_to',\n            //   foreign_key : 'parent_id',\n            // },\n          ],\n        },\n        rules     : {\n          title        : {\n            required : {\n              msg : '标题为必填项',\n            },\n          },\n          cat_id       : {\n            required : {\n              msg : '分类为必填项',\n            },\n          },\n          brand_id     : {\n            required : {\n              msg : '品牌为必填项',\n            },\n          },\n          price        : {\n            min : {\n              params : [ 0 ],\n              msg    : '价格不可小于0',\n            },\n          },\n          shipping_fee : {\n            min : {\n              params : [ 0 ],\n              msg    : '价格不可小于0',\n            },\n          },\n          total        : {\n            min : {\n              params : [ 0 ],\n              msg    : '价格不可小于0',\n            },\n          },\n\n          // parent_id : {\n          //   required : {\n          //     msg : '父级分类为必填项',\n          //   },\n          // },\n        },\n      };\n    },\n    methods    : {\n      fileUrl,\n      /**\n       * 添加独有属性\n       */\n      addProp () {\n        let pf    = this.propForm;\n        let f     = this.form;\n        let key   = pf.key;\n        let value = pf.value;\n        // 如果没填 就直接返回 否则 undefind 就会给添加进去了\n        if (!key || !value)\n          return;\n        // 如果一开始没有 this.form.prop 就初始化创建一个 否则就往里添加  this.form:{ prop:{ this.propForm.key: this.propForm.value } }\n        // Vue 不允许在已经创建的实例上动态添加新的根级响应式属性 (root-level reactive property)。然而它可以使用 Vue.set(object, key, value) 方法将响应属性添加到嵌套的对象上\n        if (!f.prop)\n          this.$set(f, 'prop', {});\n\n        this.$set(f.prop, pf.key, pf.value);\n\n        this.propForm = {};\n      },\n      // 删除自定义的个性属性\n      removeProp (key) {\n        this.$delete(this.form.prop, key);\n      },\n      // 更新自定义的个性属性  必须 $set 才能动态渲染视图\n      fillPropForm (key, value) {\n        this.$set(this.propForm, 'key', key);\n        this.$set(this.propForm, 'value', value);\n      },\n      // 轮播图执行函数\n      carouselUploaded (data) {\n        this.form.carousel_img = data;\n        // this.$set(this.form, 'carouse_img', data);\n      },\n      // 添加主图 首先 form 没有 main_img 就先初始化一个 然后给他添加\n      singleCoverUploaded (data) {\n        console.log(data);\n        if (!this.form.main_img)\n          this.$set(this.form, 'main_img', []);\n\n        this.form.main_img.push(data);\n      },\n      \n      singleDescImageUploaded (image, index) {\n        this.updateDesc(index, image);\n      },\n      // 添加详情描述 首先 form 没有 detail 就先初始化一个 然后给他添加 这个函数只负责往里面推一项数据 并不在乎是文字还是图片\n      inertDesc (type) {\n        if (!this.form.detail)\n          this.$set(this.form, 'detail', []);\n\n        this.form.detail.push({ type });\n      },\n      // 有了 inertDesc 函数之后才能更新 \n      updateDesc (index, value) {\n        this.$set(this.form.detail[ index ], 'value', value);\n        console.log(this.form.detail);\n      },\n      removeDesc (index) {\n        this.form.detail.splice(index, 1);\n      },\n    },\n  };\n</script>\n\n<style scoped>\n  .thumbnail {\n    -webkit-box-shadow: 0 0 3px rgba(0, 0, 0, .2);-moz-box-shadow: 0 0 3px rgba(0, 0, 0, .2);box-shadow: 0 0 3px rgba(0, 0, 0, .2);\n  }\n\n  table .thumbnail {\n    text-align: center;\n    display: inline-block;\n    max-width: 50px;\n    font-size: 70%;\n  }\n\n  .segment {\n    padding: .5em;\n    border: 2px solid #ccc;\n    margin-bottom: .5em;\n  }\n</style>"]}